<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>linkModule.ml &mdash; Coverage report</title>
    <meta name="description" content="75.18% coverage in linking/linkModule.ml">
    <link rel="stylesheet" href="../coverage.css"/>
    <script src="../highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <div id="header">
      <h1>
        <a href="../index.html">
          <span class="dirname">linking/</span>linkModule.ml
        </a>
      </h1>
      <h2>75.18%</h2>
    </div>
    <div id="navbar">
      <span class="unvisited" style="top:10.22%"></span>
      <span class="unvisited" style="top:10.59%"></span>
      <span class="unvisited" style="top:17.75%"></span>
      <span class="unvisited" style="top:23.33%"></span>
      <span class="unvisited" style="top:24.81%"></span>
      <span class="unvisited" style="top:24.91%"></span>
      <span class="unvisited" style="top:27.60%"></span>
      <span class="unvisited" style="top:29.18%"></span>
      <span class="unvisited" style="top:29.74%"></span>
      <span class="unvisited" style="top:30.20%"></span>
      <span class="unvisited" style="top:37.08%"></span>
      <span class="unvisited" style="top:37.27%"></span>
      <span class="unvisited" style="top:39.22%"></span>
      <span class="unvisited" style="top:39.31%"></span>
      <span class="unvisited" style="top:40.89%"></span>
      <span class="unvisited" style="top:42.29%"></span>
      <span class="unvisited" style="top:42.38%"></span>
      <span class="unvisited" style="top:42.66%"></span>
      <span class="some-visited" style="top:43.12%"></span>
      <span class="unvisited" style="top:44.33%"></span>
      <span class="unvisited" style="top:44.52%"></span>
      <span class="unvisited" style="top:47.86%"></span>
      <span class="unvisited" style="bottom:48.79%"></span>
      <span class="unvisited" style="bottom:48.70%"></span>
      <span class="unvisited" style="bottom:47.40%"></span>
      <span class="unvisited" style="bottom:47.21%"></span>
      <span class="some-visited" style="bottom:46.65%"></span>
      <span class="unvisited" style="bottom:45.35%"></span>
      <span class="unvisited" style="bottom:44.24%"></span>
      <span class="unvisited" style="bottom:42.10%"></span>
      <span class="some-visited" style="bottom:41.26%"></span>
      <span class="unvisited" style="bottom:40.33%"></span>
      <span class="unvisited" style="bottom:36.99%"></span>
      <span class="unvisited" style="bottom:36.06%"></span>
      <span class="unvisited" style="bottom:35.87%"></span>
      <span class="unvisited" style="bottom:35.78%"></span>
      <span class="unvisited" style="bottom:35.69%"></span>
      <span class="unvisited" style="bottom:35.59%"></span>
      <span class="unvisited" style="bottom:35.41%"></span>
      <span class="unvisited" style="bottom:34.11%"></span>
      <span class="unvisited" style="bottom:34.01%"></span>
      <span class="unvisited" style="bottom:33.92%"></span>
      <span class="unvisited" style="bottom:33.83%"></span>
      <span class="unvisited" style="bottom:33.74%"></span>
      <span class="unvisited" style="bottom:33.55%"></span>
      <span class="unvisited" style="bottom:33.18%"></span>
      <span class="unvisited" style="bottom:33.09%"></span>
      <span class="unvisited" style="bottom:32.53%"></span>
      <span class="unvisited" style="bottom:32.43%"></span>
      <span class="unvisited" style="bottom:32.34%"></span>
      <span class="unvisited" style="bottom:32.25%"></span>
      <span class="unvisited" style="bottom:32.06%"></span>
      <span class="unvisited" style="bottom:31.88%"></span>
      <span class="unvisited" style="bottom:31.78%"></span>
      <span class="unvisited" style="bottom:31.69%"></span>
      <span class="unvisited" style="bottom:31.23%"></span>
      <span class="unvisited" style="bottom:30.95%"></span>
      <span class="unvisited" style="bottom:30.86%"></span>
      <span class="unvisited" style="bottom:29.93%"></span>
      <span class="unvisited" style="bottom:29.65%"></span>
      <span class="unvisited" style="bottom:29.55%"></span>
      <span class="unvisited" style="bottom:29.18%"></span>
      <span class="unvisited" style="bottom:29.00%"></span>
      <span class="unvisited" style="bottom:28.81%"></span>
      <span class="unvisited" style="bottom:26.21%"></span>
      <span class="unvisited" style="bottom:26.12%"></span>
      <span class="unvisited" style="bottom:25.84%"></span>
      <span class="unvisited" style="bottom:25.74%"></span>
      <span class="unvisited" style="bottom:25.37%"></span>
      <span class="unvisited" style="bottom:25.00%"></span>
      <span class="unvisited" style="bottom:24.72%"></span>
      <span class="unvisited" style="bottom:24.63%"></span>
      <span class="unvisited" style="bottom:24.54%"></span>
      <span class="unvisited" style="bottom:24.44%"></span>
      <span class="unvisited" style="bottom:23.42%"></span>
      <span class="unvisited" style="bottom:22.96%"></span>
      <span class="unvisited" style="bottom:22.21%"></span>
      <span class="unvisited" style="bottom:21.75%"></span>
      <span class="unvisited" style="bottom:21.65%"></span>
      <span class="unvisited" style="bottom:21.47%"></span>
      <span class="unvisited" style="bottom:13.57%"></span>
      <span class="unvisited" style="bottom:13.20%"></span>
      <span class="unvisited" style="bottom:12.45%"></span>
      <span class="unvisited" style="bottom:10.04%"></span>
      <span class="unvisited" style="bottom:8.83%"></span>
      <span class="unvisited" style="bottom:8.74%"></span>
      <span class="unvisited" style="bottom:8.64%"></span>
      <span class="unvisited" style="bottom:8.55%"></span>
      <span class="unvisited" style="bottom:8.27%"></span>
      <span class="unvisited" style="bottom:8.09%"></span>
      <span class="unvisited" style="bottom:7.99%"></span>
      <span class="unvisited" style="bottom:7.71%"></span>
      <span class="unvisited" style="bottom:7.62%"></span>
      <span class="unvisited" style="bottom:7.53%"></span>
      <span class="unvisited" style="bottom:7.43%"></span>
      <span class="unvisited" style="bottom:7.34%"></span>
      <span class="unvisited" style="bottom:7.16%"></span>
      <span class="unvisited" style="bottom:7.06%"></span>
      <span class="unvisited" style="bottom:6.97%"></span>
      <span class="unvisited" style="bottom:6.88%"></span>
      <span class="unvisited" style="bottom:6.60%"></span>
      <span class="unvisited" style="bottom:6.51%"></span>
      <span class="unvisited" style="bottom:6.32%"></span>
      <span class="unvisited" style="bottom:6.23%"></span>
      <span class="unvisited" style="bottom:6.04%"></span>
      <span class="unvisited" style="bottom:5.95%"></span>
      <span class="unvisited" style="bottom:5.86%"></span>
      <span class="unvisited" style="bottom:5.67%"></span>
      <span class="unvisited" style="bottom:5.58%"></span>
      <span class="unvisited" style="bottom:5.20%"></span>
      <span class="unvisited" style="bottom:5.02%"></span>
      <span class="unvisited" style="bottom:4.93%"></span>
      <span class="unvisited" style="bottom:4.74%"></span>
      <span class="unvisited" style="bottom:4.65%"></span>
      <span class="unvisited" style="bottom:4.55%"></span>
      <span class="unvisited" style="bottom:4.46%"></span>
      <span class="unvisited" style="bottom:4.18%"></span>
      <span class="some-visited" style="bottom:2.70%"></span>
      <span class="some-visited" style="bottom:1.21%"></span>
      <span class="unvisited" style="bottom:0.74%"></span>
    </div>
    <div id="report">
      <div id="lines-layer">
        <pre>
<a id="L1"></a><span > </span>
<a id="L2"></a><span > </span>
<a id="L3"></a><span > </span>
<a id="L4"></a><span > </span>
<a id="L5"></a><span > </span>
<a id="L6"></a><span > </span>
<a id="L7"></a><span > </span>
<a id="L8"></a><span > </span>
<a id="L9"></a><span > </span>
<a id="L10"></a><span > </span>
<a id="L11"></a><span > </span>
<a id="L12"></a><span > </span>
<a id="L13"></a><span > </span>
<a id="L14"></a><span > </span>
<a id="L15"></a><span > </span>
<a id="L16"></a><span > </span>
<a id="L17"></a><span > </span>
<a id="L18"></a><span > </span>
<a id="L19"></a><span > </span>
<a id="L20"></a><span > </span>
<a id="L21"></a><span > </span>
<a id="L22"></a><span > </span>
<a id="L23"></a><span > </span>
<a id="L24"></a><span > </span>
<a id="L25"></a><span > </span>
<a id="L26"></a><span > </span>
<a id="L27"></a><span > </span>
<a id="L28"></a><span > </span>
<a id="L29"></a><span > </span>
<a id="L30"></a><span > </span>
<a id="L31"></a><span > </span>
<a id="L32"></a><span > </span>
<a id="L33"></a><span > </span>
<a id="L34"></a><span > </span>
<a id="L35"></a><span > </span>
<a id="L36"></a><span > </span>
<a id="L37"></a><span > </span>
<a id="L38"></a><span > </span>
<a id="L39"></a><span > </span>
<a id="L40"></a><span > </span>
<a id="L41"></a><span > </span>
<a id="L42"></a><span > </span>
<a id="L43"></a><span > </span>
<a id="L44"></a><span > </span>
<a id="L45"></a><span > </span>
<a id="L46"></a><span > </span>
<a id="L47"></a><span > </span>
<a id="L48"></a><span > </span>
<a id="L49"></a><span > </span>
<a id="L50"></a><span > </span>
<a id="L51"></a><span > </span>
<a id="L52"></a><span > </span>
<a id="L53"></a><span > </span>
<a id="L54"></a><span > </span>
<a id="L55"></a><span > </span>
<a id="L56"></a><span > </span>
<a id="L57"></a><span > </span>
<a id="L58"></a><span > </span>
<a id="L59"></a><span > </span>
<a id="L60"></a><span > </span>
<a id="L61"></a><span > </span>
<a id="L62"></a><span > </span>
<a id="L63"></a><span > </span>
<a id="L64"></a><span > </span>
<a id="L65"></a><span > </span>
<a id="L66"></a><span > </span>
<a id="L67"></a><span > </span>
<a id="L68"></a><span > </span>
<a id="L69"></a><span > </span>
<a id="L70"></a><span > </span>
<a id="L71"></a><span > </span>
<a id="L72"></a><span > </span>
<a id="L73"></a><span > </span>
<a id="L74"></a><span > </span>
<a id="L75"></a><span > </span>
<a id="L76"></a><span > </span>
<a id="L77"></a><span > </span>
<a id="L78"></a><span > </span>
<a id="L79"></a><span > </span>
<a id="L80"></a><span > </span>
<a id="L81"></a><span > </span>
<a id="L82"></a><span > </span>
<a id="L83"></a><span > </span>
<a id="L84"></a><span > </span>
<a id="L85"></a><span > </span>
<a id="L86"></a><span > </span>
<a id="L87"></a><span > </span>
<a id="L88"></a><span > </span>
<a id="L89"></a><span > </span>
<a id="L90"></a><span > </span>
<a id="L91"></a><span > </span>
<a id="L92"></a><span > </span>
<a id="L93"></a><span > </span>
<a id="L94"></a><span > </span>
<a id="L95"></a><span > </span>
<a id="L96"></a><span > </span>
<a id="L97"></a><span > </span>
<a id="L98"></a><span > </span>
<a id="L99"></a><span > </span>
<a id="L100"></a><span class="visited"> </span>
<a id="L101"></a><span > </span>
<a id="L102"></a><span class="visited"> </span>
<a id="L103"></a><span class="visited"> </span>
<a id="L104"></a><span > </span>
<a id="L105"></a><span > </span>
<a id="L106"></a><span > </span>
<a id="L107"></a><span > </span>
<a id="L108"></a><span class="visited"> </span>
<a id="L109"></a><span > </span>
<a id="L110"></a><span class="unvisited"> </span>
<a id="L111"></a><span class="visited"> </span>
<a id="L112"></a><span > </span>
<a id="L113"></a><span > </span>
<a id="L114"></a><span class="unvisited"> </span>
<a id="L115"></a><span class="visited"> </span>
<a id="L116"></a><span > </span>
<a id="L117"></a><span > </span>
<a id="L118"></a><span > </span>
<a id="L119"></a><span > </span>
<a id="L120"></a><span class="visited"> </span>
<a id="L121"></a><span > </span>
<a id="L122"></a><span > </span>
<a id="L123"></a><span class="visited"> </span>
<a id="L124"></a><span > </span>
<a id="L125"></a><span > </span>
<a id="L126"></a><span class="visited"> </span>
<a id="L127"></a><span class="visited"> </span>
<a id="L128"></a><span class="visited"> </span>
<a id="L129"></a><span class="visited"> </span>
<a id="L130"></a><span > </span>
<a id="L131"></a><span > </span>
<a id="L132"></a><span > </span>
<a id="L133"></a><span class="visited"> </span>
<a id="L134"></a><span class="visited"> </span>
<a id="L135"></a><span class="visited"> </span>
<a id="L136"></a><span class="visited"> </span>
<a id="L137"></a><span > </span>
<a id="L138"></a><span > </span>
<a id="L139"></a><span class="visited"> </span>
<a id="L140"></a><span class="visited"> </span>
<a id="L141"></a><span class="visited"> </span>
<a id="L142"></a><span class="visited"> </span>
<a id="L143"></a><span > </span>
<a id="L144"></a><span > </span>
<a id="L145"></a><span class="visited"> </span>
<a id="L146"></a><span class="visited"> </span>
<a id="L147"></a><span class="visited"> </span>
<a id="L148"></a><span class="visited"> </span>
<a id="L149"></a><span > </span>
<a id="L150"></a><span > </span>
<a id="L151"></a><span class="visited"> </span>
<a id="L152"></a><span class="visited"> </span>
<a id="L153"></a><span class="visited"> </span>
<a id="L154"></a><span class="visited"> </span>
<a id="L155"></a><span > </span>
<a id="L156"></a><span class="visited"> </span>
<a id="L157"></a><span > </span>
<a id="L158"></a><span > </span>
<a id="L159"></a><span class="visited"> </span>
<a id="L160"></a><span > </span>
<a id="L161"></a><span class="visited"> </span>
<a id="L162"></a><span class="visited"> </span>
<a id="L163"></a><span class="visited"> </span>
<a id="L164"></a><span > </span>
<a id="L165"></a><span class="visited"> </span>
<a id="L166"></a><span > </span>
<a id="L167"></a><span > </span>
<a id="L168"></a><span > </span>
<a id="L169"></a><span > </span>
<a id="L170"></a><span > </span>
<a id="L171"></a><span > </span>
<a id="L172"></a><span class="visited"> </span>
<a id="L173"></a><span class="visited"> </span>
<a id="L174"></a><span class="visited"> </span>
<a id="L175"></a><span class="visited"> </span>
<a id="L176"></a><span > </span>
<a id="L177"></a><span > </span>
<a id="L178"></a><span > </span>
<a id="L179"></a><span > </span>
<a id="L180"></a><span > </span>
<a id="L181"></a><span > </span>
<a id="L182"></a><span class="visited"> </span>
<a id="L183"></a><span class="visited"> </span>
<a id="L184"></a><span > </span>
<a id="L185"></a><span > </span>
<a id="L186"></a><span class="visited"> </span>
<a id="L187"></a><span class="visited"> </span>
<a id="L188"></a><span > </span>
<a id="L189"></a><span > </span>
<a id="L190"></a><span class="visited"> </span>
<a id="L191"></a><span class="unvisited"> </span>
<a id="L192"></a><span > </span>
<a id="L193"></a><span > </span>
<a id="L194"></a><span class="visited"> </span>
<a id="L195"></a><span class="visited"> </span>
<a id="L196"></a><span > </span>
<a id="L197"></a><span > </span>
<a id="L198"></a><span class="visited"> </span>
<a id="L199"></a><span class="visited"> </span>
<a id="L200"></a><span > </span>
<a id="L201"></a><span > </span>
<a id="L202"></a><span class="visited"> </span>
<a id="L203"></a><span class="visited"> </span>
<a id="L204"></a><span > </span>
<a id="L205"></a><span > </span>
<a id="L206"></a><span > </span>
<a id="L207"></a><span class="visited"> </span>
<a id="L208"></a><span class="visited"> </span>
<a id="L209"></a><span > </span>
<a id="L210"></a><span > </span>
<a id="L211"></a><span class="visited"> </span>
<a id="L212"></a><span class="visited"> </span>
<a id="L213"></a><span > </span>
<a id="L214"></a><span > </span>
<a id="L215"></a><span class="visited"> </span>
<a id="L216"></a><span class="visited"> </span>
<a id="L217"></a><span > </span>
<a id="L218"></a><span class="visited"> </span>
<a id="L219"></a><span > </span>
<a id="L220"></a><span > </span>
<a id="L221"></a><span class="visited"> </span>
<a id="L222"></a><span class="visited"> </span>
<a id="L223"></a><span > </span>
<a id="L224"></a><span class="visited"> </span>
<a id="L225"></a><span class="visited"> </span>
<a id="L226"></a><span > </span>
<a id="L227"></a><span > </span>
<a id="L228"></a><span class="visited"> </span>
<a id="L229"></a><span class="visited"> </span>
<a id="L230"></a><span > </span>
<a id="L231"></a><span > </span>
<a id="L232"></a><span > </span>
<a id="L233"></a><span class="visited"> </span>
<a id="L234"></a><span class="visited"> </span>
<a id="L235"></a><span > </span>
<a id="L236"></a><span class="visited"> </span>
<a id="L237"></a><span class="visited"> </span>
<a id="L238"></a><span > </span>
<a id="L239"></a><span > </span>
<a id="L240"></a><span > </span>
<a id="L241"></a><span class="visited"> </span>
<a id="L242"></a><span class="visited"> </span>
<a id="L243"></a><span > </span>
<a id="L244"></a><span class="visited"> </span>
<a id="L245"></a><span class="visited"> </span>
<a id="L246"></a><span > </span>
<a id="L247"></a><span > </span>
<a id="L248"></a><span class="visited"> </span>
<a id="L249"></a><span > </span>
<a id="L250"></a><span class="visited"> </span>
<a id="L251"></a><span class="unvisited"> </span>
<a id="L252"></a><span > </span>
<a id="L253"></a><span > </span>
<a id="L254"></a><span class="visited"> </span>
<a id="L255"></a><span > </span>
<a id="L256"></a><span > </span>
<a id="L257"></a><span > </span>
<a id="L258"></a><span class="visited"> </span>
<a id="L259"></a><span > </span>
<a id="L260"></a><span > </span>
<a id="L261"></a><span > </span>
<a id="L262"></a><span > </span>
<a id="L263"></a><span > </span>
<a id="L264"></a><span > </span>
<a id="L265"></a><span > </span>
<a id="L266"></a><span > </span>
<a id="L267"></a><span class="unvisited"> </span>
<a id="L268"></a><span class="unvisited"> </span>
<a id="L269"></a><span > </span>
<a id="L270"></a><span > </span>
<a id="L271"></a><span > </span>
<a id="L272"></a><span > </span>
<a id="L273"></a><span > </span>
<a id="L274"></a><span class="visited"> </span>
<a id="L275"></a><span class="visited"> </span>
<a id="L276"></a><span class="visited"> </span>
<a id="L277"></a><span > </span>
<a id="L278"></a><span > </span>
<a id="L279"></a><span > </span>
<a id="L280"></a><span class="visited"> </span>
<a id="L281"></a><span > </span>
<a id="L282"></a><span class="visited"> </span>
<a id="L283"></a><span class="visited"> </span>
<a id="L284"></a><span class="visited"> </span>
<a id="L285"></a><span class="visited"> </span>
<a id="L286"></a><span > </span>
<a id="L287"></a><span class="visited"> </span>
<a id="L288"></a><span > </span>
<a id="L289"></a><span > </span>
<a id="L290"></a><span > </span>
<a id="L291"></a><span > </span>
<a id="L292"></a><span > </span>
<a id="L293"></a><span > </span>
<a id="L294"></a><span class="visited"> </span>
<a id="L295"></a><span class="visited"> </span>
<a id="L296"></a><span class="visited"> </span>
<a id="L297"></a><span class="unvisited"> </span>
<a id="L298"></a><span > </span>
<a id="L299"></a><span > </span>
<a id="L300"></a><span > </span>
<a id="L301"></a><span class="visited"> </span>
<a id="L302"></a><span > </span>
<a id="L303"></a><span class="visited"> </span>
<a id="L304"></a><span class="visited"> </span>
<a id="L305"></a><span > </span>
<a id="L306"></a><span class="visited"> </span>
<a id="L307"></a><span class="visited"> </span>
<a id="L308"></a><span class="visited"> </span>
<a id="L309"></a><span class="visited"> </span>
<a id="L310"></a><span class="visited"> </span>
<a id="L311"></a><span class="visited"> </span>
<a id="L312"></a><span class="visited"> </span>
<a id="L313"></a><span > </span>
<a id="L314"></a><span class="unvisited"> </span>
<a id="L315"></a><span class="visited"> </span>
<a id="L316"></a><span > </span>
<a id="L317"></a><span > </span>
<a id="L318"></a><span class="visited"> </span>
<a id="L319"></a><span class="visited"> </span>
<a id="L320"></a><span class="unvisited"> </span>
<a id="L321"></a><span class="visited"> </span>
<a id="L322"></a><span class="visited"> </span>
<a id="L323"></a><span class="visited"> </span>
<a id="L324"></a><span > </span>
<a id="L325"></a><span class="unvisited"> </span>
<a id="L326"></a><span class="visited"> </span>
<a id="L327"></a><span > </span>
<a id="L328"></a><span > </span>
<a id="L329"></a><span > </span>
<a id="L330"></a><span > </span>
<a id="L331"></a><span > </span>
<a id="L332"></a><span > </span>
<a id="L333"></a><span > </span>
<a id="L334"></a><span class="visited"> </span>
<a id="L335"></a><span class="visited"> </span>
<a id="L336"></a><span > </span>
<a id="L337"></a><span > </span>
<a id="L338"></a><span class="visited"> </span>
<a id="L339"></a><span class="visited"> </span>
<a id="L340"></a><span class="visited"> </span>
<a id="L341"></a><span class="visited"> </span>
<a id="L342"></a><span class="visited"> </span>
<a id="L343"></a><span class="visited"> </span>
<a id="L344"></a><span class="visited"> </span>
<a id="L345"></a><span class="visited"> </span>
<a id="L346"></a><span > </span>
<a id="L347"></a><span class="visited"> </span>
<a id="L348"></a><span > </span>
<a id="L349"></a><span class="visited"> </span>
<a id="L350"></a><span > </span>
<a id="L351"></a><span class="visited"> </span>
<a id="L352"></a><span class="visited"> </span>
<a id="L353"></a><span class="visited"> </span>
<a id="L354"></a><span > </span>
<a id="L355"></a><span class="visited"> </span>
<a id="L356"></a><span > </span>
<a id="L357"></a><span class="visited"> </span>
<a id="L358"></a><span > </span>
<a id="L359"></a><span class="visited"> </span>
<a id="L360"></a><span class="visited"> </span>
<a id="L361"></a><span > </span>
<a id="L362"></a><span > </span>
<a id="L363"></a><span class="visited"> </span>
<a id="L364"></a><span class="visited"> </span>
<a id="L365"></a><span class="visited"> </span>
<a id="L366"></a><span class="visited"> </span>
<a id="L367"></a><span > </span>
<a id="L368"></a><span > </span>
<a id="L369"></a><span class="visited"> </span>
<a id="L370"></a><span class="visited"> </span>
<a id="L371"></a><span > </span>
<a id="L372"></a><span > </span>
<a id="L373"></a><span class="visited"> </span>
<a id="L374"></a><span class="visited"> </span>
<a id="L375"></a><span class="visited"> </span>
<a id="L376"></a><span class="visited"> </span>
<a id="L377"></a><span class="visited"> </span>
<a id="L378"></a><span class="visited"> </span>
<a id="L379"></a><span class="visited"> </span>
<a id="L380"></a><span class="visited"> </span>
<a id="L381"></a><span class="visited"> </span>
<a id="L382"></a><span > </span>
<a id="L383"></a><span class="visited"> </span>
<a id="L384"></a><span > </span>
<a id="L385"></a><span class="visited"> </span>
<a id="L386"></a><span > </span>
<a id="L387"></a><span class="visited"> </span>
<a id="L388"></a><span > </span>
<a id="L389"></a><span class="visited"> </span>
<a id="L390"></a><span > </span>
<a id="L391"></a><span class="visited"> </span>
<a id="L392"></a><span > </span>
<a id="L393"></a><span class="visited"> </span>
<a id="L394"></a><span > </span>
<a id="L395"></a><span class="visited"> </span>
<a id="L396"></a><span > </span>
<a id="L397"></a><span class="visited"> </span>
<a id="L398"></a><span class="visited"> </span>
<a id="L399"></a><span class="unvisited"> </span>
<a id="L400"></a><span class="visited"> </span>
<a id="L401"></a><span class="unvisited"> </span>
<a id="L402"></a><span > </span>
<a id="L403"></a><span > </span>
<a id="L404"></a><span class="visited"> </span>
<a id="L405"></a><span > </span>
<a id="L406"></a><span class="visited"> </span>
<a id="L407"></a><span > </span>
<a id="L408"></a><span > </span>
<a id="L409"></a><span class="visited"> </span>
<a id="L410"></a><span class="visited"> </span>
<a id="L411"></a><span class="visited"> </span>
<a id="L412"></a><span class="visited"> </span>
<a id="L413"></a><span class="visited"> </span>
<a id="L414"></a><span > </span>
<a id="L415"></a><span > </span>
<a id="L416"></a><span > </span>
<a id="L417"></a><span class="visited"> </span>
<a id="L418"></a><span > </span>
<a id="L419"></a><span class="visited"> </span>
<a id="L420"></a><span class="visited"> </span>
<a id="L421"></a><span > </span>
<a id="L422"></a><span class="unvisited"> </span>
<a id="L423"></a><span class="unvisited"> </span>
<a id="L424"></a><span > </span>
<a id="L425"></a><span class="visited"> </span>
<a id="L426"></a><span > </span>
<a id="L427"></a><span > </span>
<a id="L428"></a><span > </span>
<a id="L429"></a><span class="visited"> </span>
<a id="L430"></a><span > </span>
<a id="L431"></a><span class="visited"> </span>
<a id="L432"></a><span class="visited"> </span>
<a id="L433"></a><span > </span>
<a id="L434"></a><span class="visited"> </span>
<a id="L435"></a><span > </span>
<a id="L436"></a><span class="visited"> </span>
<a id="L437"></a><span class="visited"> </span>
<a id="L438"></a><span class="visited"> </span>
<a id="L439"></a><span class="visited"> </span>
<a id="L440"></a><span class="unvisited"> </span>
<a id="L441"></a><span class="visited"> </span>
<a id="L442"></a><span > </span>
<a id="L443"></a><span class="visited"> </span>
<a id="L444"></a><span class="visited"> </span>
<a id="L445"></a><span class="visited"> </span>
<a id="L446"></a><span > </span>
<a id="L447"></a><span class="visited"> </span>
<a id="L448"></a><span > </span>
<a id="L449"></a><span class="visited"> </span>
<a id="L450"></a><span > </span>
<a id="L451"></a><span class="visited"> </span>
<a id="L452"></a><span > </span>
<a id="L453"></a><span > </span>
<a id="L454"></a><span class="visited"> </span>
<a id="L455"></a><span class="unvisited"> </span>
<a id="L456"></a><span class="unvisited"> </span>
<a id="L457"></a><span > </span>
<a id="L458"></a><span > </span>
<a id="L459"></a><span class="unvisited"> </span>
<a id="L460"></a><span > </span>
<a id="L461"></a><span class="visited"> </span>
<a id="L462"></a><span class="visited"> </span>
<a id="L463"></a><span class="visited"> </span>
<a id="L464"></a><span class="some-visited"> </span>
<a id="L465"></a><span > </span>
<a id="L466"></a><span > </span>
<a id="L467"></a><span class="visited"> </span>
<a id="L468"></a><span > </span>
<a id="L469"></a><span class="visited"> </span>
<a id="L470"></a><span > </span>
<a id="L471"></a><span class="visited"> </span>
<a id="L472"></a><span > </span>
<a id="L473"></a><span class="visited"> </span>
<a id="L474"></a><span > </span>
<a id="L475"></a><span class="visited"> </span>
<a id="L476"></a><span class="visited"> </span>
<a id="L477"></a><span class="unvisited"> </span>
<a id="L478"></a><span class="visited"> </span>
<a id="L479"></a><span class="unvisited"> </span>
<a id="L480"></a><span > </span>
<a id="L481"></a><span > </span>
<a id="L482"></a><span class="visited"> </span>
<a id="L483"></a><span > </span>
<a id="L484"></a><span class="visited"> </span>
<a id="L485"></a><span > </span>
<a id="L486"></a><span > </span>
<a id="L487"></a><span class="visited"> </span>
<a id="L488"></a><span class="visited"> </span>
<a id="L489"></a><span class="visited"> </span>
<a id="L490"></a><span class="visited"> </span>
<a id="L491"></a><span class="visited"> </span>
<a id="L492"></a><span > </span>
<a id="L493"></a><span > </span>
<a id="L494"></a><span > </span>
<a id="L495"></a><span class="visited"> </span>
<a id="L496"></a><span class="visited"> </span>
<a id="L497"></a><span class="visited"> </span>
<a id="L498"></a><span > </span>
<a id="L499"></a><span > </span>
<a id="L500"></a><span > </span>
<a id="L501"></a><span class="visited"> </span>
<a id="L502"></a><span class="visited"> </span>
<a id="L503"></a><span class="visited"> </span>
<a id="L504"></a><span > </span>
<a id="L505"></a><span > </span>
<a id="L506"></a><span > </span>
<a id="L507"></a><span class="visited"> </span>
<a id="L508"></a><span class="visited"> </span>
<a id="L509"></a><span > </span>
<a id="L510"></a><span > </span>
<a id="L511"></a><span > </span>
<a id="L512"></a><span class="visited"> </span>
<a id="L513"></a><span > </span>
<a id="L514"></a><span class="visited"> </span>
<a id="L515"></a><span class="unvisited"> </span>
<a id="L516"></a><span class="visited"> </span>
<a id="L517"></a><span > </span>
<a id="L518"></a><span > </span>
<a id="L519"></a><span class="visited"> </span>
<a id="L520"></a><span class="visited"> </span>
<a id="L521"></a><span class="visited"> </span>
<a id="L522"></a><span class="visited"> </span>
<a id="L523"></a><span class="visited"> </span>
<a id="L524"></a><span class="visited"> </span>
<a id="L525"></a><span class="visited"> </span>
<a id="L526"></a><span > </span>
<a id="L527"></a><span class="visited"> </span>
<a id="L528"></a><span > </span>
<a id="L529"></a><span class="visited"> </span>
<a id="L530"></a><span > </span>
<a id="L531"></a><span class="visited"> </span>
<a id="L532"></a><span class="visited"> </span>
<a id="L533"></a><span class="visited"> </span>
<a id="L534"></a><span > </span>
<a id="L535"></a><span class="visited"> </span>
<a id="L536"></a><span > </span>
<a id="L537"></a><span class="visited"> </span>
<a id="L538"></a><span > </span>
<a id="L539"></a><span class="visited"> </span>
<a id="L540"></a><span class="visited"> </span>
<a id="L541"></a><span class="visited"> </span>
<a id="L542"></a><span > </span>
<a id="L543"></a><span > </span>
<a id="L544"></a><span > </span>
<a id="L545"></a><span > </span>
<a id="L546"></a><span > </span>
<a id="L547"></a><span class="visited"> </span>
<a id="L548"></a><span class="visited"> </span>
<a id="L549"></a><span class="visited"> </span>
<a id="L550"></a><span class="visited"> </span>
<a id="L551"></a><span class="unvisited"> </span>
<a id="L552"></a><span class="unvisited"> </span>
<a id="L553"></a><span > </span>
<a id="L554"></a><span class="visited"> </span>
<a id="L555"></a><span class="visited"> </span>
<a id="L556"></a><span > </span>
<a id="L557"></a><span > </span>
<a id="L558"></a><span > </span>
<a id="L559"></a><span > </span>
<a id="L560"></a><span > </span>
<a id="L561"></a><span class="visited"> </span>
<a id="L562"></a><span > </span>
<a id="L563"></a><span class="visited"> </span>
<a id="L564"></a><span > </span>
<a id="L565"></a><span > </span>
<a id="L566"></a><span class="unvisited"> </span>
<a id="L567"></a><span class="visited"> </span>
<a id="L568"></a><span class="unvisited"> </span>
<a id="L569"></a><span > </span>
<a id="L570"></a><span class="visited"> </span>
<a id="L571"></a><span class="visited"> </span>
<a id="L572"></a><span > </span>
<a id="L573"></a><span class="visited"> </span>
<a id="L574"></a><span class="some-visited"> </span>
<a id="L575"></a><span > </span>
<a id="L576"></a><span class="visited"> </span>
<a id="L577"></a><span > </span>
<a id="L578"></a><span class="visited"> </span>
<a id="L579"></a><span class="visited"> </span>
<a id="L580"></a><span > </span>
<a id="L581"></a><span > </span>
<a id="L582"></a><span class="visited"> </span>
<a id="L583"></a><span > </span>
<a id="L584"></a><span class="visited"> </span>
<a id="L585"></a><span class="visited"> </span>
<a id="L586"></a><span > </span>
<a id="L587"></a><span > </span>
<a id="L588"></a><span class="unvisited"> </span>
<a id="L589"></a><span > </span>
<a id="L590"></a><span class="visited"> </span>
<a id="L591"></a><span class="visited"> </span>
<a id="L592"></a><span > </span>
<a id="L593"></a><span class="visited"> </span>
<a id="L594"></a><span > </span>
<a id="L595"></a><span class="visited"> </span>
<a id="L596"></a><span class="visited"> </span>
<a id="L597"></a><span > </span>
<a id="L598"></a><span > </span>
<a id="L599"></a><span > </span>
<a id="L600"></a><span class="unvisited"> </span>
<a id="L601"></a><span > </span>
<a id="L602"></a><span > </span>
<a id="L603"></a><span > </span>
<a id="L604"></a><span > </span>
<a id="L605"></a><span > </span>
<a id="L606"></a><span > </span>
<a id="L607"></a><span > </span>
<a id="L608"></a><span class="visited"> </span>
<a id="L609"></a><span > </span>
<a id="L610"></a><span > </span>
<a id="L611"></a><span class="visited"> </span>
<a id="L612"></a><span class="visited"> </span>
<a id="L613"></a><span class="visited"> </span>
<a id="L614"></a><span class="visited"> </span>
<a id="L615"></a><span class="visited"> </span>
<a id="L616"></a><span class="visited"> </span>
<a id="L617"></a><span > </span>
<a id="L618"></a><span class="visited"> </span>
<a id="L619"></a><span > </span>
<a id="L620"></a><span class="visited"> </span>
<a id="L621"></a><span > </span>
<a id="L622"></a><span > </span>
<a id="L623"></a><span class="unvisited"> </span>
<a id="L624"></a><span > </span>
<a id="L625"></a><span class="visited"> </span>
<a id="L626"></a><span > </span>
<a id="L627"></a><span > </span>
<a id="L628"></a><span > </span>
<a id="L629"></a><span class="visited"> </span>
<a id="L630"></a><span class="visited"> </span>
<a id="L631"></a><span class="visited"> </span>
<a id="L632"></a><span class="some-visited"> </span>
<a id="L633"></a><span class="visited"> </span>
<a id="L634"></a><span > </span>
<a id="L635"></a><span > </span>
<a id="L636"></a><span > </span>
<a id="L637"></a><span class="visited"> </span>
<a id="L638"></a><span > </span>
<a id="L639"></a><span class="visited"> </span>
<a id="L640"></a><span class="visited"> </span>
<a id="L641"></a><span class="visited"> </span>
<a id="L642"></a><span class="unvisited"> </span>
<a id="L643"></a><span > </span>
<a id="L644"></a><span class="visited"> </span>
<a id="L645"></a><span > </span>
<a id="L646"></a><span > </span>
<a id="L647"></a><span > </span>
<a id="L648"></a><span > </span>
<a id="L649"></a><span > </span>
<a id="L650"></a><span > </span>
<a id="L651"></a><span class="visited"> </span>
<a id="L652"></a><span > </span>
<a id="L653"></a><span > </span>
<a id="L654"></a><span > </span>
<a id="L655"></a><span > </span>
<a id="L656"></a><span > </span>
<a id="L657"></a><span > </span>
<a id="L658"></a><span > </span>
<a id="L659"></a><span > </span>
<a id="L660"></a><span > </span>
<a id="L661"></a><span > </span>
<a id="L662"></a><span > </span>
<a id="L663"></a><span > </span>
<a id="L664"></a><span > </span>
<a id="L665"></a><span > </span>
<a id="L666"></a><span > </span>
<a id="L667"></a><span > </span>
<a id="L668"></a><span > </span>
<a id="L669"></a><span > </span>
<a id="L670"></a><span > </span>
<a id="L671"></a><span > </span>
<a id="L672"></a><span > </span>
<a id="L673"></a><span > </span>
<a id="L674"></a><span > </span>
<a id="L675"></a><span > </span>
<a id="L676"></a><span > </span>
<a id="L677"></a><span > </span>
<a id="L678"></a><span class="unvisited"> </span>
<a id="L679"></a><span class="visited"> </span>
<a id="L680"></a><span > </span>
<a id="L681"></a><span > </span>
<a id="L682"></a><span > </span>
<a id="L683"></a><span > </span>
<a id="L684"></a><span class="visited"> </span>
<a id="L685"></a><span class="visited"> </span>
<a id="L686"></a><span class="visited"> </span>
<a id="L687"></a><span class="visited"> </span>
<a id="L688"></a><span class="unvisited"> </span>
<a id="L689"></a><span > </span>
<a id="L690"></a><span class="unvisited"> </span>
<a id="L691"></a><span class="unvisited"> </span>
<a id="L692"></a><span class="unvisited"> </span>
<a id="L693"></a><span class="unvisited"> </span>
<a id="L694"></a><span > </span>
<a id="L695"></a><span class="unvisited"> </span>
<a id="L696"></a><span > </span>
<a id="L697"></a><span > </span>
<a id="L698"></a><span class="visited"> </span>
<a id="L699"></a><span > </span>
<a id="L700"></a><span class="visited"> </span>
<a id="L701"></a><span > </span>
<a id="L702"></a><span > </span>
<a id="L703"></a><span > </span>
<a id="L704"></a><span class="visited"> </span>
<a id="L705"></a><span > </span>
<a id="L706"></a><span class="visited"> </span>
<a id="L707"></a><span > </span>
<a id="L708"></a><span > </span>
<a id="L709"></a><span class="unvisited"> </span>
<a id="L710"></a><span class="unvisited"> </span>
<a id="L711"></a><span class="unvisited"> </span>
<a id="L712"></a><span class="unvisited"> </span>
<a id="L713"></a><span class="unvisited"> </span>
<a id="L714"></a><span > </span>
<a id="L715"></a><span class="unvisited"> </span>
<a id="L716"></a><span > </span>
<a id="L717"></a><span > </span>
<a id="L718"></a><span > </span>
<a id="L719"></a><span class="unvisited"> </span>
<a id="L720"></a><span class="unvisited"> </span>
<a id="L721"></a><span > </span>
<a id="L722"></a><span > </span>
<a id="L723"></a><span > </span>
<a id="L724"></a><span > </span>
<a id="L725"></a><span > </span>
<a id="L726"></a><span class="unvisited"> </span>
<a id="L727"></a><span class="unvisited"> </span>
<a id="L728"></a><span class="unvisited"> </span>
<a id="L729"></a><span class="unvisited"> </span>
<a id="L730"></a><span > </span>
<a id="L731"></a><span class="unvisited"> </span>
<a id="L732"></a><span > </span>
<a id="L733"></a><span class="unvisited"> </span>
<a id="L734"></a><span class="unvisited"> </span>
<a id="L735"></a><span class="unvisited"> </span>
<a id="L736"></a><span > </span>
<a id="L737"></a><span > </span>
<a id="L738"></a><span > </span>
<a id="L739"></a><span > </span>
<a id="L740"></a><span class="unvisited"> </span>
<a id="L741"></a><span > </span>
<a id="L742"></a><span > </span>
<a id="L743"></a><span class="unvisited"> </span>
<a id="L744"></a><span class="unvisited"> </span>
<a id="L745"></a><span > </span>
<a id="L746"></a><span > </span>
<a id="L747"></a><span > </span>
<a id="L748"></a><span > </span>
<a id="L749"></a><span class="visited"> </span>
<a id="L750"></a><span > </span>
<a id="L751"></a><span class="visited"> </span>
<a id="L752"></a><span class="visited"> </span>
<a id="L753"></a><span > </span>
<a id="L754"></a><span class="unvisited"> </span>
<a id="L755"></a><span > </span>
<a id="L756"></a><span > </span>
<a id="L757"></a><span class="unvisited"> </span>
<a id="L758"></a><span class="unvisited"> </span>
<a id="L759"></a><span > </span>
<a id="L760"></a><span > </span>
<a id="L761"></a><span > </span>
<a id="L762"></a><span class="unvisited"> </span>
<a id="L763"></a><span > </span>
<a id="L764"></a><span class="unvisited"> </span>
<a id="L765"></a><span > </span>
<a id="L766"></a><span class="unvisited"> </span>
<a id="L767"></a><span > </span>
<a id="L768"></a><span class="visited"> </span>
<a id="L769"></a><span > </span>
<a id="L770"></a><span class="visited"> </span>
<a id="L771"></a><span > </span>
<a id="L772"></a><span class="visited"> </span>
<a id="L773"></a><span > </span>
<a id="L774"></a><span > </span>
<a id="L775"></a><span > </span>
<a id="L776"></a><span > </span>
<a id="L777"></a><span > </span>
<a id="L778"></a><span > </span>
<a id="L779"></a><span > </span>
<a id="L780"></a><span > </span>
<a id="L781"></a><span > </span>
<a id="L782"></a><span class="visited"> </span>
<a id="L783"></a><span > </span>
<a id="L784"></a><span > </span>
<a id="L785"></a><span > </span>
<a id="L786"></a><span > </span>
<a id="L787"></a><span > </span>
<a id="L788"></a><span > </span>
<a id="L789"></a><span > </span>
<a id="L790"></a><span > </span>
<a id="L791"></a><span class="visited"> </span>
<a id="L792"></a><span class="visited"> </span>
<a id="L793"></a><span > </span>
<a id="L794"></a><span class="unvisited"> </span>
<a id="L795"></a><span class="unvisited"> </span>
<a id="L796"></a><span > </span>
<a id="L797"></a><span > </span>
<a id="L798"></a><span class="unvisited"> </span>
<a id="L799"></a><span class="unvisited"> </span>
<a id="L800"></a><span > </span>
<a id="L801"></a><span > </span>
<a id="L802"></a><span > </span>
<a id="L803"></a><span class="unvisited"> </span>
<a id="L804"></a><span > </span>
<a id="L805"></a><span > </span>
<a id="L806"></a><span > </span>
<a id="L807"></a><span class="unvisited"> </span>
<a id="L808"></a><span > </span>
<a id="L809"></a><span > </span>
<a id="L810"></a><span class="unvisited"> </span>
<a id="L811"></a><span class="unvisited"> </span>
<a id="L812"></a><span class="unvisited"> </span>
<a id="L813"></a><span class="unvisited"> </span>
<a id="L814"></a><span > </span>
<a id="L815"></a><span > </span>
<a id="L816"></a><span > </span>
<a id="L817"></a><span > </span>
<a id="L818"></a><span > </span>
<a id="L819"></a><span > </span>
<a id="L820"></a><span class="visited"> </span>
<a id="L821"></a><span > </span>
<a id="L822"></a><span class="visited"> </span>
<a id="L823"></a><span class="visited"> </span>
<a id="L824"></a><span class="unvisited"> </span>
<a id="L825"></a><span class="visited"> </span>
<a id="L826"></a><span > </span>
<a id="L827"></a><span > </span>
<a id="L828"></a><span class="visited"> </span>
<a id="L829"></a><span class="unvisited"> </span>
<a id="L830"></a><span > </span>
<a id="L831"></a><span > </span>
<a id="L832"></a><span > </span>
<a id="L833"></a><span class="visited"> </span>
<a id="L834"></a><span class="visited"> </span>
<a id="L835"></a><span > </span>
<a id="L836"></a><span class="visited"> </span>
<a id="L837"></a><span class="unvisited"> </span>
<a id="L838"></a><span > </span>
<a id="L839"></a><span > </span>
<a id="L840"></a><span > </span>
<a id="L841"></a><span > </span>
<a id="L842"></a><span class="unvisited"> </span>
<a id="L843"></a><span class="unvisited"> </span>
<a id="L844"></a><span > </span>
<a id="L845"></a><span class="unvisited"> </span>
<a id="L846"></a><span > </span>
<a id="L847"></a><span class="visited"> </span>
<a id="L848"></a><span > </span>
<a id="L849"></a><span class="visited"> </span>
<a id="L850"></a><span > </span>
<a id="L851"></a><span > </span>
<a id="L852"></a><span > </span>
<a id="L853"></a><span > </span>
<a id="L854"></a><span > </span>
<a id="L855"></a><span class="visited"> </span>
<a id="L856"></a><span class="visited"> </span>
<a id="L857"></a><span > </span>
<a id="L858"></a><span class="visited"> </span>
<a id="L859"></a><span > </span>
<a id="L860"></a><span > </span>
<a id="L861"></a><span class="visited"> </span>
<a id="L862"></a><span > </span>
<a id="L863"></a><span class="visited"> </span>
<a id="L864"></a><span > </span>
<a id="L865"></a><span class="visited"> </span>
<a id="L866"></a><span > </span>
<a id="L867"></a><span > </span>
<a id="L868"></a><span class="visited"> </span>
<a id="L869"></a><span class="visited"> </span>
<a id="L870"></a><span class="visited"> </span>
<a id="L871"></a><span class="visited"> </span>
<a id="L872"></a><span > </span>
<a id="L873"></a><span class="visited"> </span>
<a id="L874"></a><span class="visited"> </span>
<a id="L875"></a><span class="visited"> </span>
<a id="L876"></a><span > </span>
<a id="L877"></a><span class="visited"> </span>
<a id="L878"></a><span class="visited"> </span>
<a id="L879"></a><span class="visited"> </span>
<a id="L880"></a><span > </span>
<a id="L881"></a><span > </span>
<a id="L882"></a><span > </span>
<a id="L883"></a><span class="visited"> </span>
<a id="L884"></a><span class="visited"> </span>
<a id="L885"></a><span > </span>
<a id="L886"></a><span > </span>
<a id="L887"></a><span class="visited"> </span>
<a id="L888"></a><span class="visited"> </span>
<a id="L889"></a><span class="visited"> </span>
<a id="L890"></a><span > </span>
<a id="L891"></a><span class="visited"> </span>
<a id="L892"></a><span class="visited"> </span>
<a id="L893"></a><span class="visited"> </span>
<a id="L894"></a><span > </span>
<a id="L895"></a><span class="visited"> </span>
<a id="L896"></a><span class="visited"> </span>
<a id="L897"></a><span class="visited"> </span>
<a id="L898"></a><span > </span>
<a id="L899"></a><span > </span>
<a id="L900"></a><span class="visited"> </span>
<a id="L901"></a><span > </span>
<a id="L902"></a><span class="visited"> </span>
<a id="L903"></a><span class="visited"> </span>
<a id="L904"></a><span > </span>
<a id="L905"></a><span > </span>
<a id="L906"></a><span > </span>
<a id="L907"></a><span > </span>
<a id="L908"></a><span class="visited"> </span>
<a id="L909"></a><span > </span>
<a id="L910"></a><span > </span>
<a id="L911"></a><span > </span>
<a id="L912"></a><span > </span>
<a id="L913"></a><span class="visited"> </span>
<a id="L914"></a><span class="visited"> </span>
<a id="L915"></a><span class="visited"> </span>
<a id="L916"></a><span class="visited"> </span>
<a id="L917"></a><span class="visited"> </span>
<a id="L918"></a><span class="visited"> </span>
<a id="L919"></a><span > </span>
<a id="L920"></a><span > </span>
<a id="L921"></a><span > </span>
<a id="L922"></a><span > </span>
<a id="L923"></a><span > </span>
<a id="L924"></a><span class="visited"> </span>
<a id="L925"></a><span class="visited"> </span>
<a id="L926"></a><span > </span>
<a id="L927"></a><span > </span>
<a id="L928"></a><span class="visited"> </span>
<a id="L929"></a><span class="visited"> </span>
<a id="L930"></a><span class="unvisited"> </span>
<a id="L931"></a><span > </span>
<a id="L932"></a><span > </span>
<a id="L933"></a><span class="visited"> </span>
<a id="L934"></a><span class="unvisited"> </span>
<a id="L935"></a><span class="visited"> </span>
<a id="L936"></a><span > </span>
<a id="L937"></a><span > </span>
<a id="L938"></a><span > </span>
<a id="L939"></a><span > </span>
<a id="L940"></a><span > </span>
<a id="L941"></a><span class="visited"> </span>
<a id="L942"></a><span class="unvisited"> </span>
<a id="L943"></a><span class="visited"> </span>
<a id="L944"></a><span > </span>
<a id="L945"></a><span > </span>
<a id="L946"></a><span > </span>
<a id="L947"></a><span > </span>
<a id="L948"></a><span class="visited"> </span>
<a id="L949"></a><span class="visited"> </span>
<a id="L950"></a><span > </span>
<a id="L951"></a><span > </span>
<a id="L952"></a><span > </span>
<a id="L953"></a><span class="visited"> </span>
<a id="L954"></a><span class="visited"> </span>
<a id="L955"></a><span > </span>
<a id="L956"></a><span > </span>
<a id="L957"></a><span > </span>
<a id="L958"></a><span > </span>
<a id="L959"></a><span > </span>
<a id="L960"></a><span class="visited"> </span>
<a id="L961"></a><span class="visited"> </span>
<a id="L962"></a><span class="visited"> </span>
<a id="L963"></a><span > </span>
<a id="L964"></a><span > </span>
<a id="L965"></a><span > </span>
<a id="L966"></a><span > </span>
<a id="L967"></a><span class="visited"> </span>
<a id="L968"></a><span class="unvisited"> </span>
<a id="L969"></a><span class="visited"> </span>
<a id="L970"></a><span > </span>
<a id="L971"></a><span > </span>
<a id="L972"></a><span > </span>
<a id="L973"></a><span class="visited"> </span>
<a id="L974"></a><span > </span>
<a id="L975"></a><span > </span>
<a id="L976"></a><span > </span>
<a id="L977"></a><span > </span>
<a id="L978"></a><span > </span>
<a id="L979"></a><span > </span>
<a id="L980"></a><span class="visited"> </span>
<a id="L981"></a><span class="unvisited"> </span>
<a id="L982"></a><span class="unvisited"> </span>
<a id="L983"></a><span class="unvisited"> </span>
<a id="L984"></a><span class="unvisited"> </span>
<a id="L985"></a><span > </span>
<a id="L986"></a><span > </span>
<a id="L987"></a><span class="unvisited"> </span>
<a id="L988"></a><span > </span>
<a id="L989"></a><span class="unvisited"> </span>
<a id="L990"></a><span class="unvisited"> </span>
<a id="L991"></a><span > </span>
<a id="L992"></a><span > </span>
<a id="L993"></a><span class="unvisited"> </span>
<a id="L994"></a><span class="unvisited"> </span>
<a id="L995"></a><span class="unvisited"> </span>
<a id="L996"></a><span class="unvisited"> </span>
<a id="L997"></a><span class="unvisited"> </span>
<a id="L998"></a><span > </span>
<a id="L999"></a><span class="unvisited"> </span>
<a id="L1000"></a><span class="unvisited"> </span>
<a id="L1001"></a><span class="unvisited"> </span>
<a id="L1002"></a><span class="unvisited"> </span>
<a id="L1003"></a><span > </span>
<a id="L1004"></a><span > </span>
<a id="L1005"></a><span class="unvisited"> </span>
<a id="L1006"></a><span class="unvisited"> </span>
<a id="L1007"></a><span > </span>
<a id="L1008"></a><span class="unvisited"> </span>
<a id="L1009"></a><span class="unvisited"> </span>
<a id="L1010"></a><span > </span>
<a id="L1011"></a><span class="unvisited"> </span>
<a id="L1012"></a><span class="unvisited"> </span>
<a id="L1013"></a><span class="unvisited"> </span>
<a id="L1014"></a><span > </span>
<a id="L1015"></a><span class="unvisited"> </span>
<a id="L1016"></a><span class="unvisited"> </span>
<a id="L1017"></a><span > </span>
<a id="L1018"></a><span > </span>
<a id="L1019"></a><span > </span>
<a id="L1020"></a><span class="unvisited"> </span>
<a id="L1021"></a><span > </span>
<a id="L1022"></a><span class="unvisited"> </span>
<a id="L1023"></a><span class="unvisited"> </span>
<a id="L1024"></a><span > </span>
<a id="L1025"></a><span class="unvisited"> </span>
<a id="L1026"></a><span class="unvisited"> </span>
<a id="L1027"></a><span class="unvisited"> </span>
<a id="L1028"></a><span class="unvisited"> </span>
<a id="L1029"></a><span > </span>
<a id="L1030"></a><span > </span>
<a id="L1031"></a><span class="unvisited"> </span>
<a id="L1032"></a><span > </span>
<a id="L1033"></a><span > </span>
<a id="L1034"></a><span > </span>
<a id="L1035"></a><span > </span>
<a id="L1036"></a><span class="visited"> </span>
<a id="L1037"></a><span class="visited"> </span>
<a id="L1038"></a><span class="visited"> </span>
<a id="L1039"></a><span class="visited"> </span>
<a id="L1040"></a><span class="visited"> </span>
<a id="L1041"></a><span class="visited"> </span>
<a id="L1042"></a><span class="visited"> </span>
<a id="L1043"></a><span class="visited"> </span>
<a id="L1044"></a><span class="visited"> </span>
<a id="L1045"></a><span > </span>
<a id="L1046"></a><span > </span>
<a id="L1047"></a><span class="some-visited"> </span>
<a id="L1048"></a><span class="visited"> </span>
<a id="L1049"></a><span class="visited"> </span>
<a id="L1050"></a><span class="visited"> </span>
<a id="L1051"></a><span class="visited"> </span>
<a id="L1052"></a><span class="visited"> </span>
<a id="L1053"></a><span class="visited"> </span>
<a id="L1054"></a><span class="visited"> </span>
<a id="L1055"></a><span > </span>
<a id="L1056"></a><span > </span>
<a id="L1057"></a><span > </span>
<a id="L1058"></a><span class="visited"> </span>
<a id="L1059"></a><span > </span>
<a id="L1060"></a><span > </span>
<a id="L1061"></a><span class="visited"> </span>
<a id="L1062"></a><span class="visited"> </span>
<a id="L1063"></a><span class="some-visited"> </span>
<a id="L1064"></a><span > </span>
<a id="L1065"></a><span > </span>
<a id="L1066"></a><span > </span>
<a id="L1067"></a><span class="visited"> </span>
<a id="L1068"></a><span class="unvisited"> </span>
<a id="L1069"></a><span > </span>
<a id="L1070"></a><span > </span>
<a id="L1071"></a><span > </span>
<a id="L1072"></a><span class="visited"> </span>
<a id="L1073"></a><span class="visited"> </span>
<a id="L1074"></a><span > </span>
<a id="L1075"></a><span > </span>
<a id="L1076"></a><span class="visited"> </span>
</pre>
      </div>
      <div id="text-layer">
        <pre id="line-numbers">
<a href="#L1">   1</a>
<a href="#L2">   2</a>
<a href="#L3">   3</a>
<a href="#L4">   4</a>
<a href="#L5">   5</a>
<a href="#L6">   6</a>
<a href="#L7">   7</a>
<a href="#L8">   8</a>
<a href="#L9">   9</a>
<a href="#L10">  10</a>
<a href="#L11">  11</a>
<a href="#L12">  12</a>
<a href="#L13">  13</a>
<a href="#L14">  14</a>
<a href="#L15">  15</a>
<a href="#L16">  16</a>
<a href="#L17">  17</a>
<a href="#L18">  18</a>
<a href="#L19">  19</a>
<a href="#L20">  20</a>
<a href="#L21">  21</a>
<a href="#L22">  22</a>
<a href="#L23">  23</a>
<a href="#L24">  24</a>
<a href="#L25">  25</a>
<a href="#L26">  26</a>
<a href="#L27">  27</a>
<a href="#L28">  28</a>
<a href="#L29">  29</a>
<a href="#L30">  30</a>
<a href="#L31">  31</a>
<a href="#L32">  32</a>
<a href="#L33">  33</a>
<a href="#L34">  34</a>
<a href="#L35">  35</a>
<a href="#L36">  36</a>
<a href="#L37">  37</a>
<a href="#L38">  38</a>
<a href="#L39">  39</a>
<a href="#L40">  40</a>
<a href="#L41">  41</a>
<a href="#L42">  42</a>
<a href="#L43">  43</a>
<a href="#L44">  44</a>
<a href="#L45">  45</a>
<a href="#L46">  46</a>
<a href="#L47">  47</a>
<a href="#L48">  48</a>
<a href="#L49">  49</a>
<a href="#L50">  50</a>
<a href="#L51">  51</a>
<a href="#L52">  52</a>
<a href="#L53">  53</a>
<a href="#L54">  54</a>
<a href="#L55">  55</a>
<a href="#L56">  56</a>
<a href="#L57">  57</a>
<a href="#L58">  58</a>
<a href="#L59">  59</a>
<a href="#L60">  60</a>
<a href="#L61">  61</a>
<a href="#L62">  62</a>
<a href="#L63">  63</a>
<a href="#L64">  64</a>
<a href="#L65">  65</a>
<a href="#L66">  66</a>
<a href="#L67">  67</a>
<a href="#L68">  68</a>
<a href="#L69">  69</a>
<a href="#L70">  70</a>
<a href="#L71">  71</a>
<a href="#L72">  72</a>
<a href="#L73">  73</a>
<a href="#L74">  74</a>
<a href="#L75">  75</a>
<a href="#L76">  76</a>
<a href="#L77">  77</a>
<a href="#L78">  78</a>
<a href="#L79">  79</a>
<a href="#L80">  80</a>
<a href="#L81">  81</a>
<a href="#L82">  82</a>
<a href="#L83">  83</a>
<a href="#L84">  84</a>
<a href="#L85">  85</a>
<a href="#L86">  86</a>
<a href="#L87">  87</a>
<a href="#L88">  88</a>
<a href="#L89">  89</a>
<a href="#L90">  90</a>
<a href="#L91">  91</a>
<a href="#L92">  92</a>
<a href="#L93">  93</a>
<a href="#L94">  94</a>
<a href="#L95">  95</a>
<a href="#L96">  96</a>
<a href="#L97">  97</a>
<a href="#L98">  98</a>
<a href="#L99">  99</a>
<a href="#L100"> 100</a>
<a href="#L101"> 101</a>
<a href="#L102"> 102</a>
<a href="#L103"> 103</a>
<a href="#L104"> 104</a>
<a href="#L105"> 105</a>
<a href="#L106"> 106</a>
<a href="#L107"> 107</a>
<a href="#L108"> 108</a>
<a href="#L109"> 109</a>
<a href="#L110"> 110</a>
<a href="#L111"> 111</a>
<a href="#L112"> 112</a>
<a href="#L113"> 113</a>
<a href="#L114"> 114</a>
<a href="#L115"> 115</a>
<a href="#L116"> 116</a>
<a href="#L117"> 117</a>
<a href="#L118"> 118</a>
<a href="#L119"> 119</a>
<a href="#L120"> 120</a>
<a href="#L121"> 121</a>
<a href="#L122"> 122</a>
<a href="#L123"> 123</a>
<a href="#L124"> 124</a>
<a href="#L125"> 125</a>
<a href="#L126"> 126</a>
<a href="#L127"> 127</a>
<a href="#L128"> 128</a>
<a href="#L129"> 129</a>
<a href="#L130"> 130</a>
<a href="#L131"> 131</a>
<a href="#L132"> 132</a>
<a href="#L133"> 133</a>
<a href="#L134"> 134</a>
<a href="#L135"> 135</a>
<a href="#L136"> 136</a>
<a href="#L137"> 137</a>
<a href="#L138"> 138</a>
<a href="#L139"> 139</a>
<a href="#L140"> 140</a>
<a href="#L141"> 141</a>
<a href="#L142"> 142</a>
<a href="#L143"> 143</a>
<a href="#L144"> 144</a>
<a href="#L145"> 145</a>
<a href="#L146"> 146</a>
<a href="#L147"> 147</a>
<a href="#L148"> 148</a>
<a href="#L149"> 149</a>
<a href="#L150"> 150</a>
<a href="#L151"> 151</a>
<a href="#L152"> 152</a>
<a href="#L153"> 153</a>
<a href="#L154"> 154</a>
<a href="#L155"> 155</a>
<a href="#L156"> 156</a>
<a href="#L157"> 157</a>
<a href="#L158"> 158</a>
<a href="#L159"> 159</a>
<a href="#L160"> 160</a>
<a href="#L161"> 161</a>
<a href="#L162"> 162</a>
<a href="#L163"> 163</a>
<a href="#L164"> 164</a>
<a href="#L165"> 165</a>
<a href="#L166"> 166</a>
<a href="#L167"> 167</a>
<a href="#L168"> 168</a>
<a href="#L169"> 169</a>
<a href="#L170"> 170</a>
<a href="#L171"> 171</a>
<a href="#L172"> 172</a>
<a href="#L173"> 173</a>
<a href="#L174"> 174</a>
<a href="#L175"> 175</a>
<a href="#L176"> 176</a>
<a href="#L177"> 177</a>
<a href="#L178"> 178</a>
<a href="#L179"> 179</a>
<a href="#L180"> 180</a>
<a href="#L181"> 181</a>
<a href="#L182"> 182</a>
<a href="#L183"> 183</a>
<a href="#L184"> 184</a>
<a href="#L185"> 185</a>
<a href="#L186"> 186</a>
<a href="#L187"> 187</a>
<a href="#L188"> 188</a>
<a href="#L189"> 189</a>
<a href="#L190"> 190</a>
<a href="#L191"> 191</a>
<a href="#L192"> 192</a>
<a href="#L193"> 193</a>
<a href="#L194"> 194</a>
<a href="#L195"> 195</a>
<a href="#L196"> 196</a>
<a href="#L197"> 197</a>
<a href="#L198"> 198</a>
<a href="#L199"> 199</a>
<a href="#L200"> 200</a>
<a href="#L201"> 201</a>
<a href="#L202"> 202</a>
<a href="#L203"> 203</a>
<a href="#L204"> 204</a>
<a href="#L205"> 205</a>
<a href="#L206"> 206</a>
<a href="#L207"> 207</a>
<a href="#L208"> 208</a>
<a href="#L209"> 209</a>
<a href="#L210"> 210</a>
<a href="#L211"> 211</a>
<a href="#L212"> 212</a>
<a href="#L213"> 213</a>
<a href="#L214"> 214</a>
<a href="#L215"> 215</a>
<a href="#L216"> 216</a>
<a href="#L217"> 217</a>
<a href="#L218"> 218</a>
<a href="#L219"> 219</a>
<a href="#L220"> 220</a>
<a href="#L221"> 221</a>
<a href="#L222"> 222</a>
<a href="#L223"> 223</a>
<a href="#L224"> 224</a>
<a href="#L225"> 225</a>
<a href="#L226"> 226</a>
<a href="#L227"> 227</a>
<a href="#L228"> 228</a>
<a href="#L229"> 229</a>
<a href="#L230"> 230</a>
<a href="#L231"> 231</a>
<a href="#L232"> 232</a>
<a href="#L233"> 233</a>
<a href="#L234"> 234</a>
<a href="#L235"> 235</a>
<a href="#L236"> 236</a>
<a href="#L237"> 237</a>
<a href="#L238"> 238</a>
<a href="#L239"> 239</a>
<a href="#L240"> 240</a>
<a href="#L241"> 241</a>
<a href="#L242"> 242</a>
<a href="#L243"> 243</a>
<a href="#L244"> 244</a>
<a href="#L245"> 245</a>
<a href="#L246"> 246</a>
<a href="#L247"> 247</a>
<a href="#L248"> 248</a>
<a href="#L249"> 249</a>
<a href="#L250"> 250</a>
<a href="#L251"> 251</a>
<a href="#L252"> 252</a>
<a href="#L253"> 253</a>
<a href="#L254"> 254</a>
<a href="#L255"> 255</a>
<a href="#L256"> 256</a>
<a href="#L257"> 257</a>
<a href="#L258"> 258</a>
<a href="#L259"> 259</a>
<a href="#L260"> 260</a>
<a href="#L261"> 261</a>
<a href="#L262"> 262</a>
<a href="#L263"> 263</a>
<a href="#L264"> 264</a>
<a href="#L265"> 265</a>
<a href="#L266"> 266</a>
<a href="#L267"> 267</a>
<a href="#L268"> 268</a>
<a href="#L269"> 269</a>
<a href="#L270"> 270</a>
<a href="#L271"> 271</a>
<a href="#L272"> 272</a>
<a href="#L273"> 273</a>
<a href="#L274"> 274</a>
<a href="#L275"> 275</a>
<a href="#L276"> 276</a>
<a href="#L277"> 277</a>
<a href="#L278"> 278</a>
<a href="#L279"> 279</a>
<a href="#L280"> 280</a>
<a href="#L281"> 281</a>
<a href="#L282"> 282</a>
<a href="#L283"> 283</a>
<a href="#L284"> 284</a>
<a href="#L285"> 285</a>
<a href="#L286"> 286</a>
<a href="#L287"> 287</a>
<a href="#L288"> 288</a>
<a href="#L289"> 289</a>
<a href="#L290"> 290</a>
<a href="#L291"> 291</a>
<a href="#L292"> 292</a>
<a href="#L293"> 293</a>
<a href="#L294"> 294</a>
<a href="#L295"> 295</a>
<a href="#L296"> 296</a>
<a href="#L297"> 297</a>
<a href="#L298"> 298</a>
<a href="#L299"> 299</a>
<a href="#L300"> 300</a>
<a href="#L301"> 301</a>
<a href="#L302"> 302</a>
<a href="#L303"> 303</a>
<a href="#L304"> 304</a>
<a href="#L305"> 305</a>
<a href="#L306"> 306</a>
<a href="#L307"> 307</a>
<a href="#L308"> 308</a>
<a href="#L309"> 309</a>
<a href="#L310"> 310</a>
<a href="#L311"> 311</a>
<a href="#L312"> 312</a>
<a href="#L313"> 313</a>
<a href="#L314"> 314</a>
<a href="#L315"> 315</a>
<a href="#L316"> 316</a>
<a href="#L317"> 317</a>
<a href="#L318"> 318</a>
<a href="#L319"> 319</a>
<a href="#L320"> 320</a>
<a href="#L321"> 321</a>
<a href="#L322"> 322</a>
<a href="#L323"> 323</a>
<a href="#L324"> 324</a>
<a href="#L325"> 325</a>
<a href="#L326"> 326</a>
<a href="#L327"> 327</a>
<a href="#L328"> 328</a>
<a href="#L329"> 329</a>
<a href="#L330"> 330</a>
<a href="#L331"> 331</a>
<a href="#L332"> 332</a>
<a href="#L333"> 333</a>
<a href="#L334"> 334</a>
<a href="#L335"> 335</a>
<a href="#L336"> 336</a>
<a href="#L337"> 337</a>
<a href="#L338"> 338</a>
<a href="#L339"> 339</a>
<a href="#L340"> 340</a>
<a href="#L341"> 341</a>
<a href="#L342"> 342</a>
<a href="#L343"> 343</a>
<a href="#L344"> 344</a>
<a href="#L345"> 345</a>
<a href="#L346"> 346</a>
<a href="#L347"> 347</a>
<a href="#L348"> 348</a>
<a href="#L349"> 349</a>
<a href="#L350"> 350</a>
<a href="#L351"> 351</a>
<a href="#L352"> 352</a>
<a href="#L353"> 353</a>
<a href="#L354"> 354</a>
<a href="#L355"> 355</a>
<a href="#L356"> 356</a>
<a href="#L357"> 357</a>
<a href="#L358"> 358</a>
<a href="#L359"> 359</a>
<a href="#L360"> 360</a>
<a href="#L361"> 361</a>
<a href="#L362"> 362</a>
<a href="#L363"> 363</a>
<a href="#L364"> 364</a>
<a href="#L365"> 365</a>
<a href="#L366"> 366</a>
<a href="#L367"> 367</a>
<a href="#L368"> 368</a>
<a href="#L369"> 369</a>
<a href="#L370"> 370</a>
<a href="#L371"> 371</a>
<a href="#L372"> 372</a>
<a href="#L373"> 373</a>
<a href="#L374"> 374</a>
<a href="#L375"> 375</a>
<a href="#L376"> 376</a>
<a href="#L377"> 377</a>
<a href="#L378"> 378</a>
<a href="#L379"> 379</a>
<a href="#L380"> 380</a>
<a href="#L381"> 381</a>
<a href="#L382"> 382</a>
<a href="#L383"> 383</a>
<a href="#L384"> 384</a>
<a href="#L385"> 385</a>
<a href="#L386"> 386</a>
<a href="#L387"> 387</a>
<a href="#L388"> 388</a>
<a href="#L389"> 389</a>
<a href="#L390"> 390</a>
<a href="#L391"> 391</a>
<a href="#L392"> 392</a>
<a href="#L393"> 393</a>
<a href="#L394"> 394</a>
<a href="#L395"> 395</a>
<a href="#L396"> 396</a>
<a href="#L397"> 397</a>
<a href="#L398"> 398</a>
<a href="#L399"> 399</a>
<a href="#L400"> 400</a>
<a href="#L401"> 401</a>
<a href="#L402"> 402</a>
<a href="#L403"> 403</a>
<a href="#L404"> 404</a>
<a href="#L405"> 405</a>
<a href="#L406"> 406</a>
<a href="#L407"> 407</a>
<a href="#L408"> 408</a>
<a href="#L409"> 409</a>
<a href="#L410"> 410</a>
<a href="#L411"> 411</a>
<a href="#L412"> 412</a>
<a href="#L413"> 413</a>
<a href="#L414"> 414</a>
<a href="#L415"> 415</a>
<a href="#L416"> 416</a>
<a href="#L417"> 417</a>
<a href="#L418"> 418</a>
<a href="#L419"> 419</a>
<a href="#L420"> 420</a>
<a href="#L421"> 421</a>
<a href="#L422"> 422</a>
<a href="#L423"> 423</a>
<a href="#L424"> 424</a>
<a href="#L425"> 425</a>
<a href="#L426"> 426</a>
<a href="#L427"> 427</a>
<a href="#L428"> 428</a>
<a href="#L429"> 429</a>
<a href="#L430"> 430</a>
<a href="#L431"> 431</a>
<a href="#L432"> 432</a>
<a href="#L433"> 433</a>
<a href="#L434"> 434</a>
<a href="#L435"> 435</a>
<a href="#L436"> 436</a>
<a href="#L437"> 437</a>
<a href="#L438"> 438</a>
<a href="#L439"> 439</a>
<a href="#L440"> 440</a>
<a href="#L441"> 441</a>
<a href="#L442"> 442</a>
<a href="#L443"> 443</a>
<a href="#L444"> 444</a>
<a href="#L445"> 445</a>
<a href="#L446"> 446</a>
<a href="#L447"> 447</a>
<a href="#L448"> 448</a>
<a href="#L449"> 449</a>
<a href="#L450"> 450</a>
<a href="#L451"> 451</a>
<a href="#L452"> 452</a>
<a href="#L453"> 453</a>
<a href="#L454"> 454</a>
<a href="#L455"> 455</a>
<a href="#L456"> 456</a>
<a href="#L457"> 457</a>
<a href="#L458"> 458</a>
<a href="#L459"> 459</a>
<a href="#L460"> 460</a>
<a href="#L461"> 461</a>
<a href="#L462"> 462</a>
<a href="#L463"> 463</a>
<a href="#L464"> 464</a>
<a href="#L465"> 465</a>
<a href="#L466"> 466</a>
<a href="#L467"> 467</a>
<a href="#L468"> 468</a>
<a href="#L469"> 469</a>
<a href="#L470"> 470</a>
<a href="#L471"> 471</a>
<a href="#L472"> 472</a>
<a href="#L473"> 473</a>
<a href="#L474"> 474</a>
<a href="#L475"> 475</a>
<a href="#L476"> 476</a>
<a href="#L477"> 477</a>
<a href="#L478"> 478</a>
<a href="#L479"> 479</a>
<a href="#L480"> 480</a>
<a href="#L481"> 481</a>
<a href="#L482"> 482</a>
<a href="#L483"> 483</a>
<a href="#L484"> 484</a>
<a href="#L485"> 485</a>
<a href="#L486"> 486</a>
<a href="#L487"> 487</a>
<a href="#L488"> 488</a>
<a href="#L489"> 489</a>
<a href="#L490"> 490</a>
<a href="#L491"> 491</a>
<a href="#L492"> 492</a>
<a href="#L493"> 493</a>
<a href="#L494"> 494</a>
<a href="#L495"> 495</a>
<a href="#L496"> 496</a>
<a href="#L497"> 497</a>
<a href="#L498"> 498</a>
<a href="#L499"> 499</a>
<a href="#L500"> 500</a>
<a href="#L501"> 501</a>
<a href="#L502"> 502</a>
<a href="#L503"> 503</a>
<a href="#L504"> 504</a>
<a href="#L505"> 505</a>
<a href="#L506"> 506</a>
<a href="#L507"> 507</a>
<a href="#L508"> 508</a>
<a href="#L509"> 509</a>
<a href="#L510"> 510</a>
<a href="#L511"> 511</a>
<a href="#L512"> 512</a>
<a href="#L513"> 513</a>
<a href="#L514"> 514</a>
<a href="#L515"> 515</a>
<a href="#L516"> 516</a>
<a href="#L517"> 517</a>
<a href="#L518"> 518</a>
<a href="#L519"> 519</a>
<a href="#L520"> 520</a>
<a href="#L521"> 521</a>
<a href="#L522"> 522</a>
<a href="#L523"> 523</a>
<a href="#L524"> 524</a>
<a href="#L525"> 525</a>
<a href="#L526"> 526</a>
<a href="#L527"> 527</a>
<a href="#L528"> 528</a>
<a href="#L529"> 529</a>
<a href="#L530"> 530</a>
<a href="#L531"> 531</a>
<a href="#L532"> 532</a>
<a href="#L533"> 533</a>
<a href="#L534"> 534</a>
<a href="#L535"> 535</a>
<a href="#L536"> 536</a>
<a href="#L537"> 537</a>
<a href="#L538"> 538</a>
<a href="#L539"> 539</a>
<a href="#L540"> 540</a>
<a href="#L541"> 541</a>
<a href="#L542"> 542</a>
<a href="#L543"> 543</a>
<a href="#L544"> 544</a>
<a href="#L545"> 545</a>
<a href="#L546"> 546</a>
<a href="#L547"> 547</a>
<a href="#L548"> 548</a>
<a href="#L549"> 549</a>
<a href="#L550"> 550</a>
<a href="#L551"> 551</a>
<a href="#L552"> 552</a>
<a href="#L553"> 553</a>
<a href="#L554"> 554</a>
<a href="#L555"> 555</a>
<a href="#L556"> 556</a>
<a href="#L557"> 557</a>
<a href="#L558"> 558</a>
<a href="#L559"> 559</a>
<a href="#L560"> 560</a>
<a href="#L561"> 561</a>
<a href="#L562"> 562</a>
<a href="#L563"> 563</a>
<a href="#L564"> 564</a>
<a href="#L565"> 565</a>
<a href="#L566"> 566</a>
<a href="#L567"> 567</a>
<a href="#L568"> 568</a>
<a href="#L569"> 569</a>
<a href="#L570"> 570</a>
<a href="#L571"> 571</a>
<a href="#L572"> 572</a>
<a href="#L573"> 573</a>
<a href="#L574"> 574</a>
<a href="#L575"> 575</a>
<a href="#L576"> 576</a>
<a href="#L577"> 577</a>
<a href="#L578"> 578</a>
<a href="#L579"> 579</a>
<a href="#L580"> 580</a>
<a href="#L581"> 581</a>
<a href="#L582"> 582</a>
<a href="#L583"> 583</a>
<a href="#L584"> 584</a>
<a href="#L585"> 585</a>
<a href="#L586"> 586</a>
<a href="#L587"> 587</a>
<a href="#L588"> 588</a>
<a href="#L589"> 589</a>
<a href="#L590"> 590</a>
<a href="#L591"> 591</a>
<a href="#L592"> 592</a>
<a href="#L593"> 593</a>
<a href="#L594"> 594</a>
<a href="#L595"> 595</a>
<a href="#L596"> 596</a>
<a href="#L597"> 597</a>
<a href="#L598"> 598</a>
<a href="#L599"> 599</a>
<a href="#L600"> 600</a>
<a href="#L601"> 601</a>
<a href="#L602"> 602</a>
<a href="#L603"> 603</a>
<a href="#L604"> 604</a>
<a href="#L605"> 605</a>
<a href="#L606"> 606</a>
<a href="#L607"> 607</a>
<a href="#L608"> 608</a>
<a href="#L609"> 609</a>
<a href="#L610"> 610</a>
<a href="#L611"> 611</a>
<a href="#L612"> 612</a>
<a href="#L613"> 613</a>
<a href="#L614"> 614</a>
<a href="#L615"> 615</a>
<a href="#L616"> 616</a>
<a href="#L617"> 617</a>
<a href="#L618"> 618</a>
<a href="#L619"> 619</a>
<a href="#L620"> 620</a>
<a href="#L621"> 621</a>
<a href="#L622"> 622</a>
<a href="#L623"> 623</a>
<a href="#L624"> 624</a>
<a href="#L625"> 625</a>
<a href="#L626"> 626</a>
<a href="#L627"> 627</a>
<a href="#L628"> 628</a>
<a href="#L629"> 629</a>
<a href="#L630"> 630</a>
<a href="#L631"> 631</a>
<a href="#L632"> 632</a>
<a href="#L633"> 633</a>
<a href="#L634"> 634</a>
<a href="#L635"> 635</a>
<a href="#L636"> 636</a>
<a href="#L637"> 637</a>
<a href="#L638"> 638</a>
<a href="#L639"> 639</a>
<a href="#L640"> 640</a>
<a href="#L641"> 641</a>
<a href="#L642"> 642</a>
<a href="#L643"> 643</a>
<a href="#L644"> 644</a>
<a href="#L645"> 645</a>
<a href="#L646"> 646</a>
<a href="#L647"> 647</a>
<a href="#L648"> 648</a>
<a href="#L649"> 649</a>
<a href="#L650"> 650</a>
<a href="#L651"> 651</a>
<a href="#L652"> 652</a>
<a href="#L653"> 653</a>
<a href="#L654"> 654</a>
<a href="#L655"> 655</a>
<a href="#L656"> 656</a>
<a href="#L657"> 657</a>
<a href="#L658"> 658</a>
<a href="#L659"> 659</a>
<a href="#L660"> 660</a>
<a href="#L661"> 661</a>
<a href="#L662"> 662</a>
<a href="#L663"> 663</a>
<a href="#L664"> 664</a>
<a href="#L665"> 665</a>
<a href="#L666"> 666</a>
<a href="#L667"> 667</a>
<a href="#L668"> 668</a>
<a href="#L669"> 669</a>
<a href="#L670"> 670</a>
<a href="#L671"> 671</a>
<a href="#L672"> 672</a>
<a href="#L673"> 673</a>
<a href="#L674"> 674</a>
<a href="#L675"> 675</a>
<a href="#L676"> 676</a>
<a href="#L677"> 677</a>
<a href="#L678"> 678</a>
<a href="#L679"> 679</a>
<a href="#L680"> 680</a>
<a href="#L681"> 681</a>
<a href="#L682"> 682</a>
<a href="#L683"> 683</a>
<a href="#L684"> 684</a>
<a href="#L685"> 685</a>
<a href="#L686"> 686</a>
<a href="#L687"> 687</a>
<a href="#L688"> 688</a>
<a href="#L689"> 689</a>
<a href="#L690"> 690</a>
<a href="#L691"> 691</a>
<a href="#L692"> 692</a>
<a href="#L693"> 693</a>
<a href="#L694"> 694</a>
<a href="#L695"> 695</a>
<a href="#L696"> 696</a>
<a href="#L697"> 697</a>
<a href="#L698"> 698</a>
<a href="#L699"> 699</a>
<a href="#L700"> 700</a>
<a href="#L701"> 701</a>
<a href="#L702"> 702</a>
<a href="#L703"> 703</a>
<a href="#L704"> 704</a>
<a href="#L705"> 705</a>
<a href="#L706"> 706</a>
<a href="#L707"> 707</a>
<a href="#L708"> 708</a>
<a href="#L709"> 709</a>
<a href="#L710"> 710</a>
<a href="#L711"> 711</a>
<a href="#L712"> 712</a>
<a href="#L713"> 713</a>
<a href="#L714"> 714</a>
<a href="#L715"> 715</a>
<a href="#L716"> 716</a>
<a href="#L717"> 717</a>
<a href="#L718"> 718</a>
<a href="#L719"> 719</a>
<a href="#L720"> 720</a>
<a href="#L721"> 721</a>
<a href="#L722"> 722</a>
<a href="#L723"> 723</a>
<a href="#L724"> 724</a>
<a href="#L725"> 725</a>
<a href="#L726"> 726</a>
<a href="#L727"> 727</a>
<a href="#L728"> 728</a>
<a href="#L729"> 729</a>
<a href="#L730"> 730</a>
<a href="#L731"> 731</a>
<a href="#L732"> 732</a>
<a href="#L733"> 733</a>
<a href="#L734"> 734</a>
<a href="#L735"> 735</a>
<a href="#L736"> 736</a>
<a href="#L737"> 737</a>
<a href="#L738"> 738</a>
<a href="#L739"> 739</a>
<a href="#L740"> 740</a>
<a href="#L741"> 741</a>
<a href="#L742"> 742</a>
<a href="#L743"> 743</a>
<a href="#L744"> 744</a>
<a href="#L745"> 745</a>
<a href="#L746"> 746</a>
<a href="#L747"> 747</a>
<a href="#L748"> 748</a>
<a href="#L749"> 749</a>
<a href="#L750"> 750</a>
<a href="#L751"> 751</a>
<a href="#L752"> 752</a>
<a href="#L753"> 753</a>
<a href="#L754"> 754</a>
<a href="#L755"> 755</a>
<a href="#L756"> 756</a>
<a href="#L757"> 757</a>
<a href="#L758"> 758</a>
<a href="#L759"> 759</a>
<a href="#L760"> 760</a>
<a href="#L761"> 761</a>
<a href="#L762"> 762</a>
<a href="#L763"> 763</a>
<a href="#L764"> 764</a>
<a href="#L765"> 765</a>
<a href="#L766"> 766</a>
<a href="#L767"> 767</a>
<a href="#L768"> 768</a>
<a href="#L769"> 769</a>
<a href="#L770"> 770</a>
<a href="#L771"> 771</a>
<a href="#L772"> 772</a>
<a href="#L773"> 773</a>
<a href="#L774"> 774</a>
<a href="#L775"> 775</a>
<a href="#L776"> 776</a>
<a href="#L777"> 777</a>
<a href="#L778"> 778</a>
<a href="#L779"> 779</a>
<a href="#L780"> 780</a>
<a href="#L781"> 781</a>
<a href="#L782"> 782</a>
<a href="#L783"> 783</a>
<a href="#L784"> 784</a>
<a href="#L785"> 785</a>
<a href="#L786"> 786</a>
<a href="#L787"> 787</a>
<a href="#L788"> 788</a>
<a href="#L789"> 789</a>
<a href="#L790"> 790</a>
<a href="#L791"> 791</a>
<a href="#L792"> 792</a>
<a href="#L793"> 793</a>
<a href="#L794"> 794</a>
<a href="#L795"> 795</a>
<a href="#L796"> 796</a>
<a href="#L797"> 797</a>
<a href="#L798"> 798</a>
<a href="#L799"> 799</a>
<a href="#L800"> 800</a>
<a href="#L801"> 801</a>
<a href="#L802"> 802</a>
<a href="#L803"> 803</a>
<a href="#L804"> 804</a>
<a href="#L805"> 805</a>
<a href="#L806"> 806</a>
<a href="#L807"> 807</a>
<a href="#L808"> 808</a>
<a href="#L809"> 809</a>
<a href="#L810"> 810</a>
<a href="#L811"> 811</a>
<a href="#L812"> 812</a>
<a href="#L813"> 813</a>
<a href="#L814"> 814</a>
<a href="#L815"> 815</a>
<a href="#L816"> 816</a>
<a href="#L817"> 817</a>
<a href="#L818"> 818</a>
<a href="#L819"> 819</a>
<a href="#L820"> 820</a>
<a href="#L821"> 821</a>
<a href="#L822"> 822</a>
<a href="#L823"> 823</a>
<a href="#L824"> 824</a>
<a href="#L825"> 825</a>
<a href="#L826"> 826</a>
<a href="#L827"> 827</a>
<a href="#L828"> 828</a>
<a href="#L829"> 829</a>
<a href="#L830"> 830</a>
<a href="#L831"> 831</a>
<a href="#L832"> 832</a>
<a href="#L833"> 833</a>
<a href="#L834"> 834</a>
<a href="#L835"> 835</a>
<a href="#L836"> 836</a>
<a href="#L837"> 837</a>
<a href="#L838"> 838</a>
<a href="#L839"> 839</a>
<a href="#L840"> 840</a>
<a href="#L841"> 841</a>
<a href="#L842"> 842</a>
<a href="#L843"> 843</a>
<a href="#L844"> 844</a>
<a href="#L845"> 845</a>
<a href="#L846"> 846</a>
<a href="#L847"> 847</a>
<a href="#L848"> 848</a>
<a href="#L849"> 849</a>
<a href="#L850"> 850</a>
<a href="#L851"> 851</a>
<a href="#L852"> 852</a>
<a href="#L853"> 853</a>
<a href="#L854"> 854</a>
<a href="#L855"> 855</a>
<a href="#L856"> 856</a>
<a href="#L857"> 857</a>
<a href="#L858"> 858</a>
<a href="#L859"> 859</a>
<a href="#L860"> 860</a>
<a href="#L861"> 861</a>
<a href="#L862"> 862</a>
<a href="#L863"> 863</a>
<a href="#L864"> 864</a>
<a href="#L865"> 865</a>
<a href="#L866"> 866</a>
<a href="#L867"> 867</a>
<a href="#L868"> 868</a>
<a href="#L869"> 869</a>
<a href="#L870"> 870</a>
<a href="#L871"> 871</a>
<a href="#L872"> 872</a>
<a href="#L873"> 873</a>
<a href="#L874"> 874</a>
<a href="#L875"> 875</a>
<a href="#L876"> 876</a>
<a href="#L877"> 877</a>
<a href="#L878"> 878</a>
<a href="#L879"> 879</a>
<a href="#L880"> 880</a>
<a href="#L881"> 881</a>
<a href="#L882"> 882</a>
<a href="#L883"> 883</a>
<a href="#L884"> 884</a>
<a href="#L885"> 885</a>
<a href="#L886"> 886</a>
<a href="#L887"> 887</a>
<a href="#L888"> 888</a>
<a href="#L889"> 889</a>
<a href="#L890"> 890</a>
<a href="#L891"> 891</a>
<a href="#L892"> 892</a>
<a href="#L893"> 893</a>
<a href="#L894"> 894</a>
<a href="#L895"> 895</a>
<a href="#L896"> 896</a>
<a href="#L897"> 897</a>
<a href="#L898"> 898</a>
<a href="#L899"> 899</a>
<a href="#L900"> 900</a>
<a href="#L901"> 901</a>
<a href="#L902"> 902</a>
<a href="#L903"> 903</a>
<a href="#L904"> 904</a>
<a href="#L905"> 905</a>
<a href="#L906"> 906</a>
<a href="#L907"> 907</a>
<a href="#L908"> 908</a>
<a href="#L909"> 909</a>
<a href="#L910"> 910</a>
<a href="#L911"> 911</a>
<a href="#L912"> 912</a>
<a href="#L913"> 913</a>
<a href="#L914"> 914</a>
<a href="#L915"> 915</a>
<a href="#L916"> 916</a>
<a href="#L917"> 917</a>
<a href="#L918"> 918</a>
<a href="#L919"> 919</a>
<a href="#L920"> 920</a>
<a href="#L921"> 921</a>
<a href="#L922"> 922</a>
<a href="#L923"> 923</a>
<a href="#L924"> 924</a>
<a href="#L925"> 925</a>
<a href="#L926"> 926</a>
<a href="#L927"> 927</a>
<a href="#L928"> 928</a>
<a href="#L929"> 929</a>
<a href="#L930"> 930</a>
<a href="#L931"> 931</a>
<a href="#L932"> 932</a>
<a href="#L933"> 933</a>
<a href="#L934"> 934</a>
<a href="#L935"> 935</a>
<a href="#L936"> 936</a>
<a href="#L937"> 937</a>
<a href="#L938"> 938</a>
<a href="#L939"> 939</a>
<a href="#L940"> 940</a>
<a href="#L941"> 941</a>
<a href="#L942"> 942</a>
<a href="#L943"> 943</a>
<a href="#L944"> 944</a>
<a href="#L945"> 945</a>
<a href="#L946"> 946</a>
<a href="#L947"> 947</a>
<a href="#L948"> 948</a>
<a href="#L949"> 949</a>
<a href="#L950"> 950</a>
<a href="#L951"> 951</a>
<a href="#L952"> 952</a>
<a href="#L953"> 953</a>
<a href="#L954"> 954</a>
<a href="#L955"> 955</a>
<a href="#L956"> 956</a>
<a href="#L957"> 957</a>
<a href="#L958"> 958</a>
<a href="#L959"> 959</a>
<a href="#L960"> 960</a>
<a href="#L961"> 961</a>
<a href="#L962"> 962</a>
<a href="#L963"> 963</a>
<a href="#L964"> 964</a>
<a href="#L965"> 965</a>
<a href="#L966"> 966</a>
<a href="#L967"> 967</a>
<a href="#L968"> 968</a>
<a href="#L969"> 969</a>
<a href="#L970"> 970</a>
<a href="#L971"> 971</a>
<a href="#L972"> 972</a>
<a href="#L973"> 973</a>
<a href="#L974"> 974</a>
<a href="#L975"> 975</a>
<a href="#L976"> 976</a>
<a href="#L977"> 977</a>
<a href="#L978"> 978</a>
<a href="#L979"> 979</a>
<a href="#L980"> 980</a>
<a href="#L981"> 981</a>
<a href="#L982"> 982</a>
<a href="#L983"> 983</a>
<a href="#L984"> 984</a>
<a href="#L985"> 985</a>
<a href="#L986"> 986</a>
<a href="#L987"> 987</a>
<a href="#L988"> 988</a>
<a href="#L989"> 989</a>
<a href="#L990"> 990</a>
<a href="#L991"> 991</a>
<a href="#L992"> 992</a>
<a href="#L993"> 993</a>
<a href="#L994"> 994</a>
<a href="#L995"> 995</a>
<a href="#L996"> 996</a>
<a href="#L997"> 997</a>
<a href="#L998"> 998</a>
<a href="#L999"> 999</a>
<a href="#L1000">1000</a>
<a href="#L1001">1001</a>
<a href="#L1002">1002</a>
<a href="#L1003">1003</a>
<a href="#L1004">1004</a>
<a href="#L1005">1005</a>
<a href="#L1006">1006</a>
<a href="#L1007">1007</a>
<a href="#L1008">1008</a>
<a href="#L1009">1009</a>
<a href="#L1010">1010</a>
<a href="#L1011">1011</a>
<a href="#L1012">1012</a>
<a href="#L1013">1013</a>
<a href="#L1014">1014</a>
<a href="#L1015">1015</a>
<a href="#L1016">1016</a>
<a href="#L1017">1017</a>
<a href="#L1018">1018</a>
<a href="#L1019">1019</a>
<a href="#L1020">1020</a>
<a href="#L1021">1021</a>
<a href="#L1022">1022</a>
<a href="#L1023">1023</a>
<a href="#L1024">1024</a>
<a href="#L1025">1025</a>
<a href="#L1026">1026</a>
<a href="#L1027">1027</a>
<a href="#L1028">1028</a>
<a href="#L1029">1029</a>
<a href="#L1030">1030</a>
<a href="#L1031">1031</a>
<a href="#L1032">1032</a>
<a href="#L1033">1033</a>
<a href="#L1034">1034</a>
<a href="#L1035">1035</a>
<a href="#L1036">1036</a>
<a href="#L1037">1037</a>
<a href="#L1038">1038</a>
<a href="#L1039">1039</a>
<a href="#L1040">1040</a>
<a href="#L1041">1041</a>
<a href="#L1042">1042</a>
<a href="#L1043">1043</a>
<a href="#L1044">1044</a>
<a href="#L1045">1045</a>
<a href="#L1046">1046</a>
<a href="#L1047">1047</a>
<a href="#L1048">1048</a>
<a href="#L1049">1049</a>
<a href="#L1050">1050</a>
<a href="#L1051">1051</a>
<a href="#L1052">1052</a>
<a href="#L1053">1053</a>
<a href="#L1054">1054</a>
<a href="#L1055">1055</a>
<a href="#L1056">1056</a>
<a href="#L1057">1057</a>
<a href="#L1058">1058</a>
<a href="#L1059">1059</a>
<a href="#L1060">1060</a>
<a href="#L1061">1061</a>
<a href="#L1062">1062</a>
<a href="#L1063">1063</a>
<a href="#L1064">1064</a>
<a href="#L1065">1065</a>
<a href="#L1066">1066</a>
<a href="#L1067">1067</a>
<a href="#L1068">1068</a>
<a href="#L1069">1069</a>
<a href="#L1070">1070</a>
<a href="#L1071">1071</a>
<a href="#L1072">1072</a>
<a href="#L1073">1073</a>
<a href="#L1074">1074</a>
<a href="#L1075">1075</a>
<a href="#L1076">1076</a>
</pre>
<pre><code class="ocaml">(*
The type for a dynamic library: A normal WebAssembly module
plus the dylink section.
*)

open Wasm_exts.Ast
open Wasm.Source
open Wasm_exts.CustomModule
module I64_convert = Wasm.I64_convert

(*
This module is a first stab that should be functionally working, but will go
through further refactoring before we are happy with it. Things to do:

 * much code (finding imports, counting) is duplicated for globals and
   functions. This could be refactored into general functions and predicates.
 * There are multiple AST traversals. These could be turned into a single one
   (taking multiple rename functions) or even more generally taking a record
   of functions for each syntactic category.
*)

(*
Resolving GOT.func and GOT.mem imports
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

GOT.func and GOT.mem imports arise from function and data pointers,
respectively, in languages with pointers (e.g. C and Rust). The idea is that if
a shared library exposes a function/data pointer the entire process should use
the same pointer for the function/data so that the pointer arithmetic and
comparisons will work. For example, this C code:

    __attribute__ ((visibility("default")))
    int f0(int x, int y)
    {
        return x + y;
    }

    __attribute__ ((visibility("default")))
    int (\*f1(void)) (int x, int y)
    {
        return &amp;f0;
    }

generates this GOT.func import:

    (import "GOT.func" "f0" (global (;N;) (mut i32)))

The host is responsible of allocating a table index for this function and
resolving the import to the table index for `f0` so that this code in the
importing module would work:

    assert(f1() == f0);

Note that the definition of `f1` is in the *imported* module and this assertion
is in the *importing* module.

Similarly exposing a data pointer generates a GOT.mem import. All GOT.mem
imports to a symbol should resolve to the same constant to support equality as
above, and additionally pointer arithmetic.

(Pointer arithmetic on function pointers are undefined behavior is C and is not
supported by clang's wasm backend)

Normally this stuff is for dynamic linking, but we want to link the RTS
statically, so we resolve these imports during linking. Currently we only
support GOT.func imports, but implementing GOT.mem imports would be similar.
Secondly, we only support GOT.func imports in the module that defines the
function that we take the address of. This currently works as moc-generated code
doesn't import function addresses from the RTS.

We resolve GOT.func imports in two steps:

- After loading the RTS module we generate a list of (global index, function
  index) pairs of GOT.func imports. In the example above, global index is N and
  function index is the index of f0 in the defining module (the RTS).

  This is implemented in `collect_got_func_imports`.

- After merging the sections we add the functions to the table and replace
  `GOT.func` imports with globals to the functions' table indices.

  Note that we don't reuse table entries when a function is already in the
  table, to avoid breakage when [ref-types] proposal is implemented, which will
  allow mutating table entries.

  [ref-types]: https://github.com/WebAssembly/reference-types

  This is implemented in `replace_got_func_imports`.

See also the test `test/ld/fun-ptr` for a concrete exaple of GOT.func generation
and resolving.
*)

(* Linking *)
exception LinkError of string
exception TooLargeDataSegments of string

type imports = (int32 * name) list

let phrase f x = <span data-count="327405554">{</span> x with it = <span data-count="327405554">f</span> x.it }

let map_module f (em : extended_module) = <span data-count="7240">{</span> em with module_ = <span data-count="7240">f</span> em.module_ }
let map_name_section f (em : extended_module) = <span data-count="905">{</span> em with name = <span data-count="905">f</span> em.name }

(* Distinction between Memory64 and Memory32 *)

let uses_memory64 (m: module_') : bool =
  <span data-count="4525">l</span>et open Wasm_exts.Types in
  let MemoryType(_, index_type) = match m.memories with
  | <span data-count="0">[</span>] -&gt; raise (LinkError "Expect at least one memory in module")
  | <span data-count="4525">m</span>emory::_ -&gt; memory.it.mtype
  in
  match index_type with
  | <span data-count="0">I</span>64IndexType -&gt; true
  | <span data-count="4525">I</span>32IndexType -&gt; false

(* Generic functions about import and export lists *)

let get_import is_thing j m =
  <span data-count="294398">l</span>et open Int32 in
  let rec go i = function
    | [] -&gt; assert false
    | <span data-count="26633717">i</span>mp::is -&gt;
      if is_thing imp.it.idesc.it
      then
        <span data-count="26543217">i</span>f i = j
        then <span data-count="294398">i</span>mp
        else <span data-count="26248819">g</span>o (ad<span data-count="26248819">d</span> i 1l) is
      else <span data-count="90500">g</span>o i is
  in go 0l m.imports

let find_imports is_thing libname m : imports =
  <span data-count="3620">l</span>et name = Lib.Utf8.decode libname in
  <span data-count="3620">l</span>et rec go i acc = function
    | <span data-count="3620">[</span>] -&gt; List.rev acc
    | <span data-count="345760">i</span>mp::is -&gt;
      if is_thing imp.it.idesc.it
      then
        <span data-count="171070">i</span>f imp.it.module_name = name
        then <span data-count="146610">g</span>o (i + 1) ((Int32.of_in<span data-count="146610">t</span> i, imp.it.item_name) :: acc) is
        else <span data-count="24460">g</span>o (i + 1) acc is
      else <span data-count="174690">g</span>o i acc is
  in go 0 [] m.imports

let remove_imports is_thing resolved : module_' -&gt; module_' = <span data-count="7240">f</span>un m -&gt;
  <span data-count="7240">l</span>et rec go i = function
    | <span data-count="7240">[</span>] -&gt; []
    | <span data-count="239875">(</span>imp::is) -&gt;
      if is_thing imp.it.idesc.it
      then
        <span data-count="177405">i</span>f List.mem_assoc i resolved
        then <span data-count="150230">g</span>o (Int32.ad<span data-count="150230">d</span> i 1l) is
        else <span data-count="27175">i</span>mp :: g<span data-count="27175">o</span> (Int32.ad<span data-count="27175">d</span> i 1l) is
      else <span data-count="62470">i</span>mp :: g<span data-count="62470">o</span> i is
  in
  { m with imports = g<span data-count="7240">o</span> 0l m.imports }

let count_imports is_thing m =
  <span data-count="299555">L</span>ib.List32.length (List.filte<span data-count="299555">r</span> (fun i -&gt; <span data-count="28556925">i</span>s_thing i.it.idesc.it) m.imports)

let remove_export is_thing name : module_' -&gt; module_' = <span data-count="905">f</span>un m -&gt;
  <span data-count="905">l</span>et to_remove e =
    <span data-count="142081">n</span>ot (is_thin<span data-count="142081">g</span> e.it.edesc.it &lt;&gt; None &amp;&amp; <span data-count="140271">e</span>.it.name = Lib.Utf8.decod<span data-count="140271">e</span> name)
  in
  { m with exports = List.filte<span data-count="905">r</span> to_remove m.exports }

module NameMap = Map.Make(struct type t = Wasm.Ast.name let compare = compare end)

type exports = int32 NameMap.t

let find_exports is_thing m : exports =
  <span data-count="3620">L</span>ist.fold_left (fun map exp -&gt;
    <span data-count="332848">m</span>atch is_thing exp.it.edesc.it with
    | <span data-count="164614">S</span>ome v -&gt; NameMap.add exp.it.name v.it map
    | <span data-count="168234">_</span> -&gt; map
  ) NameMap.empty m.exports


(* Predicate to specialize these generic functions to the various entities *)

let is_fun_import = function
  | <span data-count="54497387">F</span>uncImport _ -&gt; true
  | <span data-count="532140">_</span> -&gt; false

let is_global_import = function
  | <span data-count="10860">G</span>lobalImport _ -&gt; true
  | <span data-count="750370">_</span> -&gt; false

let is_table_import = function
  | <span data-count="905">T</span>ableImport _ -&gt; true
  | <span data-count="0">_</span> -&gt; false

let is_memory_import = function
  | <span data-count="905">M</span>emoryImport _ -&gt; true
  | <span data-count="905">_</span> -&gt; false

let is_fun_export = function
  | <span data-count="301265">F</span>uncExport v -&gt; Some v
  | <span data-count="7240">_</span> -&gt; None

let is_global_export = function
  | <span data-count="3620">G</span>lobalExport v -&gt; Some v
  | <span data-count="162804">_</span> -&gt; None


let get_fun_typ i m : Wasm_exts.Types.func_type =
  <span data-count="291410">l</span>et imports_n = count_imports is_fun_import m in
  <span data-count="291410">l</span>et tyvar =
    if i &lt; imports_n
    then
      <span data-count="146883">m</span>atch (get_impor<span data-count="146883">t</span> is_fun_import i m).it.idesc.it with
      | <span data-count="146883">F</span>uncImport ty -&gt; ty.it
      | _ -&gt; assert false
    else
      <span data-count="144527">l</span>et f = Lib.List32.nth m.funcs (Int32.su<span data-count="144527">b</span> i imports_n) in
      <span data-count="144527">f</span>.it.ftype.it
    in
  (Lib.List32.nt<span data-count="291410">h</span> m.types tyvar).it

let get_global_typ i m : Wasm_exts.Types.global_type =
  <span data-count="1810">l</span>et imports_n = count_imports is_global_import m in
  <span data-count="1810">i</span>f i &lt; imports_n
  then
    <span data-count="905">m</span>atch (get_impor<span data-count="905">t</span> is_global_import i m).it.idesc.it with
    | <span data-count="905">G</span>lobalImport ty -&gt; ty
    | _ -&gt; assert false
  else
    <span data-count="905">l</span>et f = Lib.List32.nth m.globals (Int32.su<span data-count="905">b</span> i imports_n) in
    <span data-count="905">f</span>.it.gtype

(* Utilities related to functions *)

let remove_fun_imports_name_section resolved : name_section -&gt; name_section = <span data-count="1810">f</span>un ns -&gt;
  <span data-count="1810">l</span>et keep (fi, x) = <span data-count="621664">n</span>ot (List.mem_asso<span data-count="621664">c</span> fi resolved) in
  { ns with
    function_names = List.filte<span data-count="1810">r</span> keep ns.function_names;
    locals_names = List.filte<span data-count="1810">r</span> keep ns.locals_names;
  }

let prepend_to_start fi ftype (em : extended_module)  =
  <span data-count="1810">l</span>et imports_n = count_imports is_fun_import em.module_ in
  <span data-count="1810">l</span>et wrap_fi = Int32.add imports_n (Lib.List32.lengt<span data-count="1810">h</span> em.module_.funcs) in

  <span data-count="1810">l</span>et wrap_fun = {
    ftype = ftyp<span data-count="1810">e</span> @@ no_region;
    locals = [];
    body =
      [ Call (f<span data-count="1810">i</span> @@ no_region<span data-count="1810">)</span> @@ no_region ] @
      (match em.module_.start with
        | <span data-count="1810">S</span>ome start_fi -&gt; [ Call start_f<span data-count="1810">i</span> @@ no_region ]
        | <span data-count="0">N</span>one -&gt; [])
    } @@ no_region in

  <span data-count="1810">{</span> em with
    module_ =
      { em.module_ with
        funcs = em.module_.funcs @ [ wrap_fun ];
        start = Some (wrap_f<span data-count="1810">i</span> @@ no_region)
      };
    name =
      { em.name with
        function_names = em.name.function_names @ [ wrap_fi, "link_start" ]
      }
  }

let _remove_non_canister_exports (em : extended_module) : extended_module =
  <span data-count="0">l</span>et is_canister_export (exp : export) = <span data-count="0">L</span>ib.String.chop_prefi<span data-count="0">x</span> "canister_" (Lib.Utf8.encod<span data-count="0">e</span> exp.it.name) &lt;&gt; None in
  map_module (fun m -&gt; <span data-count="0">{</span> m with exports = List.filte<span data-count="0">r</span> is_canister_export m.exports }) em

let remove_non_ic_exports (em : extended_module) : extended_module =
  (* We assume that every exported function that does not have an entry in the
   custom types section was only exported for linking, and should not be
   exported in the final module *)
  <span data-count="905">l</span>et is_ic_export (exp : export) =
    <span data-count="165519">L</span>ib.String.chop_prefi<span data-count="165519">x</span> "canister_" (Lib.Utf8.encod<span data-count="165519">e</span> exp.it.name) &lt;&gt; Non<span data-count="5927">e</span> ||
    "_start" = Lib.Utf8.encod<span data-count="159592">e</span> exp.it.nam<span data-count="316">e</span>
  in

  let keep_export exp =
    <span data-count="165519">i</span>s_ic_expor<span data-count="165519">t</span> ex<span data-count="6243">p</span> ||
    match exp.it.edesc.it with
      | <span data-count="153846">F</span>uncExport _
      | <span data-count="3620">G</span>lobalExport _ -&gt; false
      | <span data-count="905">M</span>emoryExport _
      | <span data-count="905">T</span>ableExport _ -&gt; tru<span data-count="1810">e</span> in

  map_module (fun m -&gt; <span data-count="905">{</span> m with exports = List.filte<span data-count="905">r</span> keep_export m.exports }) em

(* Generic linking logic *)

type renumbering = int32 -&gt; int32

let resolve imports exports : (int32 * int32) list =
  <span data-count="3620">L</span>ist.flatten (List.ma<span data-count="3620">p</span> (fun (fi, name) -&gt;
    <span data-count="146610">m</span>atch NameMap.find_opt name exports with
    | <span data-count="146610">S</span>ome fi' -&gt; [ (fi, fi') ]
    | <span data-count="0">N</span>one -&gt; []
    ) imports)

let calculate_renaming n_imports1 n_things1 n_imports2 resolved12 resolved21 : (renumbering * renumbering) =
  <span data-count="1810">l</span>et open Int32 in

  let n_imports1' = sub n_imports1 (Lib.List32.lengt<span data-count="1810">h</span> resolved12) in
  <span data-count="1810">l</span>et n_imports2' = sub n_imports2 (Lib.List32.lengt<span data-count="1810">h</span> resolved21) in

  <span data-count="1810">l</span>et rec fun1 i =
    <span data-count="2183660">l</span>et rec go skipped = function
      | <span data-count="101479715">(</span>imp, exp)::is -&gt;
        if i &lt; imp then <span data-count="197428">s</span>ub i skipped
        else <span data-count="101282287">i</span>f i = imp then <span data-count="220013">f</span>un2 exp
        else <span data-count="101062274">g</span>o (ad<span data-count="101062274">d</span> skipped 1l) is
      | <span data-count="1766219">[</span>] -&gt;
        if i &lt; n_imports1
        then <span data-count="0">s</span>ub i skipped
        else <span data-count="1766219">s</span>ub (ad<span data-count="1766219">d</span> i n_imports2') skipped
    in go 0l resolved12
  and fun2 i =
    <span data-count="2423298">l</span>et rec go skipped = function
      | <span data-count="31668102">(</span>imp, exp)::is -&gt;
        if i &lt; imp then <span data-count="0">s</span>ub (ad<span data-count="0">d</span> i n_imports1') skipped
        else <span data-count="31668102">i</span>f i = imp then <span data-count="511643">f</span>un1 exp
        else <span data-count="31156459">g</span>o (ad<span data-count="31156459">d</span> skipped 1l) is
      | <span data-count="1911655">[</span>] -&gt;
        if i &lt; n_imports2
        then <span data-count="0">s</span>ub (ad<span data-count="0">d</span> i n_imports1') skipped
        else <span data-count="1911655">s</span>ub (ad<span data-count="1911655">d</span> (ad<span data-count="1911655">d</span> i n_imports1') n_things1) skipped
    in go 0l resolved21
  in
  (fun1, fun2)


(* AST traversals *)

let rename_funcs rn : module_' -&gt; module_' = <span data-count="1810">f</span>un m -&gt;
  <span data-count="1810">l</span>et var' = rn in
  let var = phrase var' in

  <span data-count="1810">l</span>et rec instr' = function
    | <span data-count="1848515">C</span>all v -&gt; Call (va<span data-count="1848515">r</span> v)
    | <span data-count="1613426">B</span>lock (ty, is) -&gt; Block (ty, instr<span data-count="1613426">s</span> is)
    | <span data-count="315838">L</span>oop (ty, is) -&gt; Loop (ty, instr<span data-count="315838">s</span> is)
    | <span data-count="376513">I</span>f (ty, is1, is2) -&gt; If (ty, instr<span data-count="376513">s</span> is1, instr<span data-count="376513">s</span> is2)
    | <span data-count="45573409">i</span> -&gt; i
  and instr i = <span data-count="49727701">p</span>hrase instr' i
  and instrs is = <span data-count="3176413">L</span>ist.map instr is in

  let func' f = <span data-count="494123">{</span> f with body = instr<span data-count="494123">s</span> f.body } in
  let func = phrase func' in
  <span data-count="1810">l</span>et funcs = List.map func in

  <span data-count="1810">l</span>et edesc' = function
    | <span data-count="160994">F</span>uncExport v -&gt; FuncExport (va<span data-count="160994">r</span> v)
    | <span data-count="5430">e</span> -&gt; e in
  let edesc = phrase edesc' in
  <span data-count="1810">l</span>et export' e = <span data-count="166424">{</span> e with edesc = edes<span data-count="166424">c</span> e.edesc } in
  let export = phrase export' in
  <span data-count="1810">l</span>et exports = List.map export in

  <span data-count="1810">l</span>et segment' f s = <span data-count="33592">{</span> s with init  = <span data-count="33592">f</span> s.init } in
  let segment f = <span data-count="1810">p</span>hrase (segment<span data-count="1810">'</span> f) in

  { m with
    funcs = func<span data-count="1810">s</span> m.funcs;
    exports = export<span data-count="1810">s</span> m.exports;
    start = Option.ma<span data-count="1810">p</span> var m.start;
    elems = List.ma<span data-count="1810">p</span> (segmen<span data-count="1810">t</span> (List.ma<span data-count="1810">p</span> var)) m.elems;
  }

let rename_globals rn : module_' -&gt; module_' = <span data-count="3620">f</span>un m -&gt;
  <span data-count="3620">l</span>et var' = rn in
  let var = phrase var' in

  <span data-count="3620">l</span>et rec instr' = function
    | <span data-count="4777378">B</span>lock (ty, is) -&gt; Block (ty, instr<span data-count="4777378">s</span> is)
    | <span data-count="927538">L</span>oop (ty, is) -&gt; Loop (ty, instr<span data-count="927538">s</span> is)
    | <span data-count="376513">I</span>f (ty, is1, is2) -&gt; If (ty, instr<span data-count="376513">s</span> is1, instr<span data-count="376513">s</span> is2)
    | <span data-count="1018073">G</span>lobalGet v -&gt; GlobalGet (va<span data-count="1018073">r</span> v)
    | <span data-count="987231">G</span>lobalSet v -&gt; GlobalSet (va<span data-count="987231">r</span> v)
    | <span data-count="126321294">i</span> -&gt; i
  and instr i = <span data-count="134408027">p</span>hrase instr' i
  and instrs is = <span data-count="7881127">L</span>ist.map instr is in

  let func' f = <span data-count="1256247">{</span> f with body = instr<span data-count="1256247">s</span> f.body } in
  let func = phrase func' in
  <span data-count="3620">l</span>et funcs = List.map func in

  <span data-count="3620">l</span>et const = phrase instrs in

  <span data-count="3620">l</span>et global' g = <span data-count="46351">{</span> g with value = cons<span data-count="46351">t</span> g.value } in
  let global = phrase global' in
  <span data-count="3620">l</span>et globals = List.map global in

  <span data-count="3620">l</span>et table_segment' (s : var list segment') = <span data-count="35402">{</span> s with offset = cons<span data-count="35402">t</span> s.offset; } in
  let table_segment = phrase (table_segment') in
  <span data-count="3620">l</span>et table_segments = List.map table_segment in

  <span data-count="3620">l</span>et segment_mode' (dmode : segment_mode') = 
    <span data-count="85185">m</span>atch dmode with 
      | <span data-count="0">P</span>assive -&gt; Passive
      | <span data-count="85185">A</span>ctive { index; offset } -&gt; Active { index; offset = cons<span data-count="85185">t</span> offset }
      | <span data-count="0">D</span>eclarative -&gt; Declarative
    in
  let segment_mode = phrase (segment_mode') in
  <span data-count="3620">l</span>et data_segment' (s : data_segment') = <span data-count="85185">{</span> s with dmode = segment_mod<span data-count="85185">e</span> s.dmode; } in
  let data_segment = phrase (data_segment') in
  <span data-count="3620">l</span>et data_segments = List.map data_segment in


  <span data-count="3620">{</span> m with
    funcs = func<span data-count="3620">s</span> m.funcs;
    globals = global<span data-count="3620">s</span> m.globals;
    elems = table_segment<span data-count="3620">s</span> m.elems;
    datas = data_segment<span data-count="3620">s</span> m.datas;
  }

let set_global global value = fun m -&gt;
  <span data-count="905">l</span>et rec go i = function
    | [] -&gt; assert false
    | <span data-count="24649">g</span>::gs when i = Int32.to_in<span data-count="24649">t</span> global -&gt;
      <span data-count="905">l</span>et open Wasm_exts.Types in
      let global_value = if uses_memory64 m then
        <span data-count="0">(</span>assert <span data-count="0">(</span>g.it.gtype = GlobalType (I64Type, Immutable));
        Wasm_exts.Values.I64 (Int64.of_int3<span data-count="0">2</span> value))
      else
        <span data-count="905">(</span>assert <span data-count="905">(</span>g.it.gtype = GlobalType (I32Type, Immutable));
        Wasm_exts.Values.I32 value)
      in
      let g = phrase (fun g' -&gt;
        <span data-count="905">{</span> g' with value = [Const (global_valu<span data-count="905">e</span> @@ g.at<span data-count="905">)</span> @@ g.at<span data-count="905">]</span> @@ g.at }
      ) g in
      <span data-count="905">g</span> :: gs
    | <span data-count="23744">g</span>::gs -&gt; g :: g<span data-count="23744">o</span> (i+1) gs
  in
  { m with globals = g<span data-count="905">o</span> 0 m.globals }

let fill_global (global : int32) (value : Wasm_exts.Values.value) (uses_memory64 : bool) : module_' -&gt; module_' = <span data-count="1810">f</span>un m -&gt;
  <span data-count="1810">l</span>et rec instr' = function
    | <span data-count="3163952">B</span>lock (ty, is) -&gt; Block (ty, instr<span data-count="3163952">s</span> is)
    | <span data-count="611700">L</span>oop (ty, is) -&gt; Loop (ty, instr<span data-count="611700">s</span> is)
    | <span data-count="0">I</span>f (ty, is1, is2) -&gt; If (ty, instr<span data-count="0">s</span> is1, instr<span data-count="0">s</span> is2)
    | <span data-count="1021825">G</span>lobalGet v when v.it = global -&gt; <span data-count="700735">C</span>onst (valu<span data-count="700735">e</span> @@ v.at)
    | GlobalSet v when v.it = global -&gt; assert false
    | <span data-count="80055089">i</span> -&gt; i
  and instr i = <span data-count="84531476">p</span>hrase instr' i
  and instrs is = <span data-count="4555864">L</span>ist.map instr is in

  let func' f = <span data-count="762124">{</span> f with body = instr<span data-count="762124">s</span> f.body } in
  let func = phrase func' in
  <span data-count="1810">l</span>et funcs = List.map func in

  <span data-count="1810">l</span>et const = phrase instrs in

  (* For 64-bit, convert the constant expression of the table segment offset to 32-bit. *)
  <span data-count="1810">l</span>et const_instr_to_32' = function
    | <span data-count="0">C</span>onst { it = (Wasm_exts.Values.I64 number); at } -&gt; Const ((Wasm_exts.Values.I32 (Int64.to_int3<span data-count="0">2</span> number)<span data-count="0">)</span> @@ at)
    | <span data-count="0">G</span>lobalGet v -&gt; GlobalGet v
    | _ -&gt; assert false
  in
  let const_instr_to_32 i = <span data-count="0">p</span>hrase const_instr_to_32' i in
  let convert_const_to_32' = List.map const_instr_to_32 in
  <span data-count="1810">l</span>et convert_const_to_32 = phrase convert_const_to_32' in
  <span data-count="1810">l</span>et table_const offset = 
    <span data-count="1810">l</span>et expr = const offset in
    <span data-count="1810">i</span>f uses_memory64 then <span data-count="0">c</span>onvert_const_to_32 expr else <span data-count="1810">e</span>xpr
  in

  let global' g = <span data-count="14468">{</span> g with value = cons<span data-count="14468">t</span> g.value } in
  let global = phrase global' in
  <span data-count="1810">l</span>et globals = List.map global in

  <span data-count="1810">l</span>et table_segment' (s : var list segment') = <span data-count="1810">{</span> s with offset = table_cons<span data-count="1810">t</span> s.offset; } in
  let table_segment = phrase (table_segment') in
  <span data-count="1810">l</span>et table_segments = List.map table_segment in

  <span data-count="1810">l</span>et segment_mode' (dmode : segment_mode') = 
    <span data-count="1810">m</span>atch dmode with 
      | <span data-count="0">P</span>assive -&gt; Passive
      | <span data-count="1810">A</span>ctive { index; offset } -&gt; Active { index; offset = cons<span data-count="1810">t</span> offset }
      | <span data-count="0">D</span>eclarative -&gt; Declarative
    in
  let segment_mode = phrase (segment_mode') in
  <span data-count="1810">l</span>et data_segment' (s : data_segment') = <span data-count="1810">{</span> s with dmode = segment_mod<span data-count="1810">e</span> s.dmode; } in
  let data_segment = phrase (data_segment') in
  <span data-count="1810">l</span>et data_segments = List.map data_segment in


  <span data-count="1810">{</span> m with
    funcs = func<span data-count="1810">s</span> m.funcs;
    globals = global<span data-count="1810">s</span> m.globals;
    elems = table_segment<span data-count="1810">s</span> m.elems;
    datas = data_segment<span data-count="1810">s</span> m.datas;
  }

let rename_funcs_name_section rn (ns : name_section) =
  <span data-count="1810">{</span> ns with
    function_names = List.ma<span data-count="1810">p</span> (fun (fi, name) -&gt; <span data-count="494123">(</span>r<span data-count="494123">n</span> fi, name)) ns.function_names;
    locals_names = List.ma<span data-count="1810">p</span> (fun (fi, locals) -&gt; <span data-count="113061">(</span>r<span data-count="113061">n</span> fi, locals)) ns.locals_names;
  }

let rename_funcs_extended rn (em : extended_module) =
  <span data-count="905">{</span> em with
    module_ = rename_func<span data-count="905">s</span> rn em.module_;
    name = rename_funcs_name_sectio<span data-count="905">n</span> rn em.name;
  }

let rename_globals_extended rn (em : extended_module) =
  <span data-count="905">{</span> em with
    module_ = rename_global<span data-count="905">s</span> rn em.module_;
  }

let rename_types rn m =
  <span data-count="1810">l</span>et ty_var = phrase rn in

  <span data-count="1810">l</span>et block_type = function
    | <span data-count="0">V</span>arBlockType tv -&gt; VarBlockType (ty_va<span data-count="0">r</span> tv)
    | <span data-count="2305777">V</span>alBlockType vto -&gt; ValBlockType vto in

  let rec instr' = function
    | <span data-count="90369">C</span>allIndirect tv -&gt; CallIndirect (ty_va<span data-count="90369">r</span> tv)
    | <span data-count="1613426">B</span>lock (bty, is) -&gt; Block (block_typ<span data-count="1613426">e</span> bty, instr<span data-count="1613426">s</span> is)
    | <span data-count="315838">L</span>oop (bty, is) -&gt; Loop (block_typ<span data-count="315838">e</span> bty, instr<span data-count="315838">s</span> is)
    | <span data-count="376513">I</span>f (bty, is1, is2) -&gt; If (block_typ<span data-count="376513">e</span> bty, instr<span data-count="376513">s</span> is1, instr<span data-count="376513">s</span> is2)
    | <span data-count="47331555">i</span> -&gt; i
  and instr i = <span data-count="49727701">p</span>hrase instr' i
  and instrs is = <span data-count="3176413">L</span>ist.map instr is in

  let func' f = <span data-count="494123">{</span> f with ftype = ty_va<span data-count="494123">r</span> f.ftype; body = instr<span data-count="494123">s</span> f.body } in
  let func = phrase func' in
  <span data-count="1810">l</span>et funcs = List.map func in

  <span data-count="1810">l</span>et idesc' = function
    | <span data-count="170165">F</span>uncImport tv -&gt; FuncImport (ty_va<span data-count="170165">r</span> tv)
    | <span data-count="2715">i</span>d -&gt; id in
  let idesc = phrase idesc' in
  <span data-count="1810">l</span>et import' i = <span data-count="172880">{</span> i with idesc = ides<span data-count="172880">c</span> i.idesc } in
  let import = phrase import' in
  <span data-count="1810">l</span>et imports = List.map import in

  <span data-count="1810">{</span> m with
    funcs = func<span data-count="1810">s</span> m.funcs;
    imports = import<span data-count="1810">s</span> m.imports;
  }

(* Setting and getting top-level module data *)

let read_global gi (m : module_') : int32 =
  <span data-count="905">l</span>et n_impo = count_imports is_global_import m in
  <span data-count="905">l</span>et g = List.nth m.globals (Int32.(to_in<span data-count="905">t</span> (su<span data-count="905">b</span> gi n_impo))) in
  <span data-count="905">l</span>et open Wasm_exts.Types in
  match uses_memory6<span data-count="905">4</span> m, g.it.value.it with
  | <span data-count="0">t</span>rue, [{ it = Const {it = Wasm_exts.Values.I64 i;_}; _}] -&gt; 
    assert <span data-count="0">(</span>g.it.gtype = GlobalType (I64Type, Immutable));
    Int64.to_int32 i
  | <span data-count="905">f</span>alse, [{ it = Const {it = Wasm_exts.Values.I32 i;_}; _}] -&gt;
    assert <span data-count="905">(</span>g.it.gtype = GlobalType (I32Type, Immutable));
    i
  | _ -&gt; assert false

let read_table_size (m : module_') : int32 =
  (* Assumes there is one table *)
  <span data-count="905">l</span>et open Wasm_exts.Types in
  match m.tables with
  | <span data-count="905">[</span>t] -&gt;
    let TableType ({min;max}, _) = t.it.ttype in
    if Some min &lt;&gt; max
    then <span data-count="0">r</span>aise (LinkError "Expect fixed sized table in first module")
    else <span data-count="905">m</span>in
  | <span data-count="0">_</span> -&gt; raise (LinkError "Expect one table in first module")

let set_memory_size new_size_bytes : module_' -&gt; module_' = <span data-count="905">f</span>un m -&gt;
  <span data-count="905">l</span>et open Wasm_exts.Types in
  let page_size = Int64.of_int (64*1024) in
  <span data-count="905">l</span>et new_size_pages = Int64.(ad<span data-count="905">d</span> (di<span data-count="905">v</span> new_size_bytes page_size) 1L) in
  let index_type = if uses_memory64 m then <span data-count="0">I</span>64IndexType else <span data-count="905">I</span>32IndexType in
  match m.memories with
  | <span data-count="6">[</span>t;t1] -&gt;
    { m with
      memories = [(phras<span data-count="6">e</span> (fun m -&gt;
        <span data-count="6">{</span> mtype = MemoryType ({min = new_size_pages; max = None}, index_type) }
        ) t); t1]
    }
  | <span data-count="899">[</span>t] -&gt;
    { m with
      memories = [phras<span data-count="899">e</span> (fun m -&gt;
        <span data-count="899">{</span> mtype = MemoryType ({min = new_size_pages; max = None}, index_type) }
      ) t]
    }
  | <span data-count="0">_</span> -&gt; raise (LinkError "Expect one memory in first module")

let set_table_size new_size : module_' -&gt; module_' = <span data-count="905">f</span>un m -&gt;
  <span data-count="905">l</span>et open Wasm_exts.Types in
  match m.tables with
  | <span data-count="905">[</span>t] -&gt;
    { m with
      tables = [ phras<span data-count="905">e</span> (fun t -&gt;
        <span data-count="905">l</span>et TableType (_, ty) = t.ttype in
        { ttype = TableType ({min = new_size; max = Some new_size}, ty) }
      ) t ]
    }
  | <span data-count="0">_</span> -&gt; raise (LinkError "Expect one table in first module")


let fill_item_import module_name item_name new_base uses_memory64 (m : module_') : module_' =
  (* We need to find the right import,
     replace all uses of get_global of that import with the constant,
     and finally rename all globals
  *)
  <span data-count="1810">l</span>et base_global =
    let rec go i = function
      | [] -&gt; assert false
      | <span data-count="7240">i</span>mp::is -&gt; match imp.it.idesc.it with
        | <span data-count="3620">G</span>lobalImport _ty
          when imp.it.module_name = Lib.Utf8.decod<span data-count="3620">e</span> module_name &amp;&amp;
               <span data-count="3620">i</span>mp.it.item_name = Lib.Utf8.decod<span data-count="3620">e</span> item_name -&gt;
          <span data-count="1810">I</span>nt32.of_int i
        | <span data-count="1810">G</span>lobalImport _ -&gt;
          go (i + 1) is
        | <span data-count="3620">_</span> -&gt;
          go i is
    in g<span data-count="1810">o</span> 0 m.imports in

    let new_base_value = if uses_memory64 then
      <span data-count="0">W</span>asm_exts.Values.I64 (I64_convert.extend_i32_<span data-count="0">u</span> new_base)
    else
      <span data-count="1810">W</span>asm_exts.Values.I32 new_base
    in

    m |&gt; fill_global base_global new_base_value uses_memory64
      |&gt; <span data-count="1810">r</span>emove_imports is_global_import [base_global, base_global]
      |&gt; <span data-count="1810">r</span>ename_globals Int32.(fun i -&gt;
          <span data-count="810200">i</span>f i &lt; base_global then <span data-count="739624">i</span>
          else <span data-count="70576">i</span>f i = base_global then <span data-count="0">a</span>ssert false
          else <span data-count="70576">s</span>ub i one
        )

let fill_memory_base_import new_base uses_memory64 : module_' -&gt; module_' =
  <span data-count="905">f</span>ill_item_import "env" "__memory_base" new_base uses_memory64

let fill_table_base_import new_base uses_memory64 : module_' -&gt; module_' = <span data-count="905">f</span>un m -&gt;
  <span data-count="905">l</span>et m = fill_item_import "env" "__table_base" new_base uses_memory64 m in
  <span data-count="905">i</span>f uses_memory64 then
    <span data-count="0">f</span>ill_item_import "env" "__table_base32" new_base uses_memory64 m
  else
    <span data-count="905">m</span>
   
(* Concatenation of modules *)

let join_modules
      (em1 : extended_module) (m2 : module_') (ns2 : name_section)
      (type_indices : (Wasm_exts.Types.func_type, int32) Hashtbl.t) : extended_module =
  <span data-count="905">l</span>et m1 = em1.module_ in
  let joined = 
    { em1 with
      module_ = {
        types = m1.types @ m2.types;
        globals = m1.globals @ m2.globals;
        tables = m1.tables @ m2.tables;
        memories = m1.memories @ m2.memories;
        funcs = m1.funcs @ m2.funcs;
        start = m1.start;
        elems = m1.elems @ m2.elems;
        datas = m1.datas @ m2.datas;
        imports = m1.imports @ m2.imports;
        exports = m1.exports @ m2.exports;
      };
      name = {
        em1.name with
        function_names = em1.name.function_names @ ns2.function_names;
        locals_names = em1.name.locals_names @ ns2.locals_names;
      };
      motoko = em1.motoko;
    }
  in
  (* If second module has a start, prepend it to the first module's start.
     OK to use `Hashtbl.find` below as the first module will have a start, so
     we'll have the unit function in the type section already. *)
  match m2.start with
  | <span data-count="0">N</span>one -&gt; joined
  | <span data-count="905">S</span>ome fi -&gt; prepend_to_start fi.it (Hashtbl.fin<span data-count="905">d</span> type_indices (Wasm_exts.Types.FuncType ([], []))) joined

(* The main linking function *)

let check_typ is_thing get_typ string_of m1 m2 (i1, i2) =
  <span data-count="146610">l</span>et t1 = get_typ i1 m1 in
  <span data-count="146610">l</span>et t2 = get_typ i2 m2 in
  <span data-count="146610">l</span>et imp = get_import is_thing i1 m1 in
  <span data-count="146610">i</span>f t1 &lt;&gt; t2 then
    <span data-count="0">l</span>et msg = Printf.sprintf
      "Type mismatch when linking %s.%s:\nimport type: %s\nexport type: %s"
      (string_of_nam<span data-count="0">e</span> imp.it.module_name)
      (string_of_nam<span data-count="0">e</span> imp.it.item_name)
      (string_o<span data-count="0">f</span> t1)
      (string_o<span data-count="0">f</span> t2)
    in
    <span data-count="0">r</span>aise (LinkError msg)

let check_fun_typ =
  check_ty<span data-count="1873">p</span> is_fun_import get_fun_typ Wasm_exts.Types.string_of_func_type
let check_global_typ =
  check_ty<span data-count="1873">p</span> is_global_import get_global_typ Wasm_exts.Types.string_of_global_type


let align_i32 p n =
  <span data-count="2715">l</span>et open Int32 in
  let p = to_int p in
  <span data-count="2715">s</span>hift_left (shift_right_logica<span data-count="2715">l</span> (ad<span data-count="2715">d</span> n (su<span data-count="2715">b</span> (shift_lef<span data-count="2715">t</span> 1l p) 1l)) p) p

let find_fun_export (name : name) (exports : export list) : var option =
  <span data-count="0">L</span>ist.find_map (fun (export : export) -&gt;
    <span data-count="0">i</span>f export.it.name = name then
      <span data-count="0">m</span>atch export.it.edesc.it with
      | <span data-count="0">F</span>uncExport var -&gt; Some var
      | <span data-count="0">_</span> -&gt; raise (LinkError (Format.sprint<span data-count="0">f</span> "Export %s is not a function" (Lib.Utf8.encod<span data-count="0">e</span> name)))
    else
      <span data-count="0">N</span>one
  ) exports

let remove_got_func_imports (imports : import list) : import list =
  <span data-count="0">l</span>et got_func_str = Lib.Utf8.decode "GOT.func" in
  <span data-count="0">L</span>ist.filter (fun import -&gt; <span data-count="0">i</span>mport.it.module_name &lt;&gt; got_func_str) imports

(* Merge global list of a module with a sorted (on global index) list of (global
   index, global) pairs, overriding globals at those indices, and appending
   left-overs at the end. *)
let add_globals (globals0 : global list) (insert0 : (int32 * global') list) : global list =
  <span data-count="0">l</span>et rec go (current_idx : int32) globals insert =
    <span data-count="0">m</span>atch insert with
    | <span data-count="0">[</span>] -&gt; globals
    | <span data-count="0">(</span>insert_idx, global) :: rest -&gt;
      if current_idx = insert_idx then
        <span data-count="0">(</span>globa<span data-count="0">l</span> @@ no_region) :: g<span data-count="0">o</span> (Int32.ad<span data-count="0">d</span> current_idx 1l) globals rest
      else
        <span data-count="0">m</span>atch globals with
        | <span data-count="0">[</span>] -&gt; List.map (fun (_, global) -&gt; <span data-count="0">g</span>lobal @@ no_region) insert
        | <span data-count="0">g</span>lobal :: globals -&gt; global :: g<span data-count="0">o</span> (Int32.ad<span data-count="0">d</span> current_idx 1l) globals rest
  in
  go 0l globals0 insert0

let mk_i32_const (i : int32) =
  <span data-count="0">C</span>onst (Wasm_exts.Values.I32 <span data-count="0">i</span> @@ no_region) @@ no_region

let mk_i32_global (i : int32) =
  <span data-count="0">{</span> gtype = Wasm_exts.Types.GlobalType (Wasm_exts.Types.I32Type, Wasm_exts.Types.Immutable);
    value = [mk_i32_cons<span data-count="0">t</span> i<span data-count="0">]</span> @@ no_region }

(* Generate (global index, function index) pairs for GOT.func imports of a
   module. Uses import and export lists of the module so those should be valid. *)
let collect_got_func_imports (m : module_') : (int32 * int32) list =
  <span data-count="905">l</span>et got_func_name = Lib.Utf8.decode "GOT.func" in

  <span data-count="905">l</span>et get_got_func_import (global_idx, imports) import : (int32 * (int32 * int32) list) =
    <span data-count="17195">i</span>f import.it.module_name = got_func_name then
      (* Found a GOT.func import, find the exported function for it *)
      <span data-count="0">l</span>et name = import.it.item_name in
      let fun_idx =
        match find_fun_export name m.exports with
        | <span data-count="0">N</span>one -&gt; raise (LinkError (Format.sprint<span data-count="0">f</span> "Can't find export for GOT.func import %s" (Lib.Utf8.encod<span data-count="0">e</span> name)))
        | <span data-count="0">S</span>ome export_idx -&gt; export_idx.it
      in
      let global_idx =
        if is_global_import import.it.idesc.it then
          <span data-count="0">g</span>lobal_idx
        else
          <span data-count="0">r</span>aise (LinkError "GOT.func import is not global")
      in
      ( Int32.ad<span data-count="0">d</span> global_idx (Int32.of_in<span data-count="0">t</span> 1), (global_idx, fun_idx) :: imports )
    else
      <span data-count="17195">l</span>et global_idx =
        if is_global_import import.it.idesc.it then
          <span data-count="905">I</span>nt32.ad<span data-count="905">d</span> global_idx (Int32.of_in<span data-count="905">t</span> 1)
        else
          <span data-count="16290">g</span>lobal_idx
      in
      ( global_idx, imports )
  in

  (* (global index, function index) list *)
  let (_, got_func_imports) =
    List.fold_left get_got_func_import (0l, []) m.imports
  in

  <span data-count="905">g</span>ot_func_imports

(* Add functions imported from GOT.func to the table, replace GOT.func imports
   with globals to the table indices.

   `tbe_size` is the size of the table in the merged module before adding
   GOT.func functions. *)
let replace_got_func_imports (tbl_size : int32) (imports : (int32 * int32) list) (m : module_') : module_' =
  (* null check to avoid adding empty elem section *)
  <span data-count="905">i</span>f imports = [] then
    <span data-count="905">m</span>
  else
    <span data-count="0">l</span>et imports =
      List.sort (fun (gbl_idx_1, _) (gbl_idx_2, _) -&gt; <span data-count="0">c</span>ompare gbl_idx_1 gbl_idx_2) imports
    in

    <span data-count="0">l</span>et elems : var list =
      List.ma<span data-count="0">p</span> (fun (_, fun_idx) -&gt; <span data-count="0">f</span>un_idx @@ no_region) imports
    in

    let elem_section =
      { index = 0<span data-count="0">l</span> @@ no_region; offset = [ mk_i32_cons<span data-count="0">t</span> tbl_size <span data-count="0">]</span> @@ no_region; init = elems }
    in

    let globals =
      List.mapi (fun idx (global_idx, _) -&gt; <span data-count="0">(</span>global_idx, mk_i32_globa<span data-count="0">l</span> (Int32.ad<span data-count="0">d</span> tbl_size (Int32.of_in<span data-count="0">t</span> idx)))) imports
    in

    <span data-count="0">{</span> m with
      elems = List.appen<span data-count="0">d</span> m.elems [elem_sectio<span data-count="0">n</span> @@ no_region];
      imports = remove_got_func_import<span data-count="0">s</span> m.imports;
      globals = add_global<span data-count="0">s</span> m.globals globals
    }

(* The first argument specifies the global of the first module indicating the
start of free memory *)
let link (em1 : extended_module) libname (em2 : extended_module) =

  <span data-count="905">l</span>et global_exports1 = find_exports is_global_export em1.module_ in

  <span data-count="905">l</span>et heap_global =
    match NameMap.find_opt (Lib.Utf8.decod<span data-count="905">e</span> "__heap_base") global_exports1 with
    | <span data-count="0">N</span>one -&gt; raise (LinkError "First module does not export __heap_base")
    | <span data-count="905">S</span>ome gi -&gt; gi in

  let dylink = match em2.dylink with
    | <span data-count="905">S</span>ome dylink -&gt; dylink
    | <span data-count="0">N</span>one -&gt; raise (LinkError "Second module does not have a dylink section") in

  (* Beginning of unused space *)
  let old_heap_start = read_global heap_global em1.module_ in
  <span data-count="905">l</span>et lib_heap_start = align_i32 dylink.memory_alignment old_heap_start in
  <span data-count="905">l</span>et new_heap_start = align_i32 8l (Int32.ad<span data-count="905">d</span> lib_heap_start dylink.memory_size) in

  <span data-count="905">i</span>f uses_memory64 em1.module_ then
  <span data-count="0">b</span>egin
    (* The RTS data segments must fit below 4.5MB according to the persistent heap layout. 
      The first 4MB are reserved for the Rust call stack such that RTS data segments are limited to 512KB. *)
    let max_rts_stack_size = 4 * 1024 * 1024 in
    let max_rts_data_segment_size = 512 * 1024 in
    (if (Int32.to_in<span data-count="0">t</span> new_heap_start) &gt; max_rts_stack_size + max_rts_data_segment_size then
      <span data-count="0">(</span>raise (TooLargeDataSegments (Printf.sprint<span data-count="0">f</span> "The Wasm data segment size exceeds the supported maxmimum of %nMB." max_rts_data_segment_size)))
    else
      <span data-count="0">(</span>)
    )
  end else <span data-count="905">(</span>);

  let max x y = <span data-count="905">i</span>f x &gt;= y then <span data-count="623">x</span> else <span data-count="282">y</span> in (* use `Int.max` when bumping to 4.13 *)

  (* Rust requires a table offset of at least 1 as elem[0] is considered invalid. 
     There are debug checks panicking if the element index is zero.
     On the other hand, elem[0] can be used by the Motoko backend code (em1),
     as correct Rust-generated Wasm code does not call elem[0]. *)
  let old_table_size = max (read_table_siz<span data-count="905">e</span> em1.module_) 1l in
  <span data-count="905">l</span>et lib_table_start = align_i32 dylink.table_alignment old_table_size in

  <span data-count="905">l</span>et uses_memory64 = uses_memory64 em1.module_ in

  (* Fill in memory and table base pointers *)
  <span data-count="905">l</span>et dm2 = em2.module_
    |&gt; fill_memory_base_import lib_heap_start uses_memory64
    |&gt; <span data-count="905">f</span>ill_table_base_import lib_table_start uses_memory64 in
    
  <span data-count="905">l</span>et got_func_imports = collect_got_func_imports dm2 in

  (* Link functions *)
  <span data-count="905">l</span>et fun_required1 = find_imports is_fun_import libname em1.module_ in
  <span data-count="905">l</span>et fun_required2 = find_imports is_fun_import "env" dm2 in
  <span data-count="905">l</span>et fun_exports1 = find_exports is_fun_export em1.module_ in
  <span data-count="905">l</span>et fun_exports2 = find_exports is_fun_export dm2 in
  (* Resolve imports, to produce a renumbering function: *)
  <span data-count="905">l</span>et fun_resolved12 = resolve fun_required1 fun_exports2 in
  <span data-count="905">l</span>et fun_resolved21 = resolve fun_required2 fun_exports1 in
  <span data-count="905">l</span>et (funs1, funs2) =
    calculate_renaming
      (count_import<span data-count="905">s</span> is_fun_import em1.module_)
      (Lib.List32.lengt<span data-count="905">h</span> em1.module_.funcs)
      (count_import<span data-count="905">s</span> is_fun_import dm2)
      fun_resolved12
      fun_resolved21 in

  <span data-count="905">L</span>ist.iter (check_fun_ty<span data-count="905">p</span> em1.module_ dm2) fun_resolved12;
  <span data-count="905">L</span>ist.iter (check_fun_ty<span data-count="905">p</span> dm2 em1.module_) fun_resolved21;

  (* Link globals *)
  <span data-count="905">l</span>et global_required1 = find_imports is_global_import libname em1.module_ in
  <span data-count="905">l</span>et global_required2 = find_imports is_global_import "env" dm2 in
  <span data-count="905">l</span>et global_exports2 = find_exports is_global_export dm2 in
  (* Resolve imports, to produce a renumbering *)
  <span data-count="905">l</span>et global_resolved12 = resolve global_required1 global_exports2 in
  <span data-count="905">l</span>et global_resolved21 = resolve global_required2 global_exports1 in
  <span data-count="905">l</span>et (globals1, globals2) =
    calculate_renaming
      (count_import<span data-count="905">s</span> is_global_import em1.module_)
      (Lib.List32.lengt<span data-count="905">h</span> em1.module_.globals)
      (count_import<span data-count="905">s</span> is_global_import dm2)
      global_resolved12
      global_resolved21 in
  <span data-count="905">a</span>ssert <span data-count="905">(</span>global_required1 = []); (* so far, we do not import globals *)

  List.iter (check_global_ty<span data-count="905">p</span> em1.module_ dm2) global_resolved12;
  <span data-count="905">L</span>ist.iter (check_global_ty<span data-count="905">p</span> dm2 em1.module_) global_resolved21;

  (* Rename types in both modules to eliminate duplicate types. *)

  (* Maps function types to their indices in the new module we're creating *)
  <span data-count="905">l</span>et type_indices : (Wasm_exts.Types.func_type, int32) Hashtbl.t = Hashtbl.creat<span data-count="905">e</span> 100 in

  (* Get index of a function type. Creates a new one if we haven't added this
     type yet. *)
  let add_or_get_ty (ty : Wasm_exts.Types.func_type) =
    <span data-count="755562">m</span>atch Hashtbl.find_opt type_indices ty with
    | <span data-count="45018">N</span>one -&gt;
      let idx = Int32.of_int (Hashtbl.lengt<span data-count="45018">h</span> type_indices) in
      <span data-count="45018">H</span>ashtbl.add type_indices ty idx;
      <span data-count="45018">i</span>dx
    | <span data-count="710544">S</span>ome idx -&gt;
      idx
  in

  (* Rename a type in a module. First argument is the list of types in the module. *)
  let ty_renamer (tys : Wasm_exts.Types.func_type phrase list) (t : int32) : int32 =
    <span data-count="754657">l</span>et fun_ty = List.nth tys (Int32.to_in<span data-count="754657">t</span> t) in
    <span data-count="754657">a</span>dd_or_get_ty fun_ty.it
  in

  let is_active data_segment = <span data-count="82470">m</span>atch data_segment.it.dmode.it with
  | <span data-count="82470">A</span>ctive _ -&gt; true
  | <span data-count="0">_</span> -&gt; false
  in
  let em1_active_data_segments = List.filter is_active em1.module_.datas in
  <span data-count="905">l</span>et is_passive data_segment = <span data-count="82470">m</span>atch data_segment.it.dmode.it with 
  | <span data-count="0">P</span>assive -&gt; true
  | <span data-count="82470">_</span> -&gt; false
  in
  let em1_passive_data_segments = List.filter is_passive em1.module_.datas in
  
  (* Check that the first module generated by the compiler backend does not use 
     active data segments. *)
  <span data-count="905">i</span>f uses_memory64 then
    assert <span data-count="0">(</span>(List.lengt<span data-count="0">h</span> em1_active_data_segments) = 0)
  else <span data-count="905">(</span>);
  
  let dm2_data_segment_offset = List.length em1_passive_data_segments in

  (* Rename types in first module *)
  <span data-count="905">l</span>et em1_tys =
    map_module (fun m -&gt; <span data-count="905">{</span> (rename_type<span data-count="905">s</span> (ty_rename<span data-count="905">r</span> m.types) m) with types = [] }) em1
  in

  (* Rename types in second module *)
  <span data-count="905">l</span>et dm2 =
    { (rename_type<span data-count="905">s</span> (ty_rename<span data-count="905">r</span> dm2.types) dm2) with types = [] }
  in

  (* Generate type section for the final module *)
  let type_indices_sorted : type_ list =
    Hashtbl.to_seq type_indices |&gt;
    <span data-count="905">L</span>ist.of_seq |&gt;
    <span data-count="905">L</span>ist.sort (fun (_, idx1) (_, idx2) -&gt; <span data-count="202419">c</span>ompare idx1 idx2) |&gt;
    <span data-count="905">L</span>ist.ma<span data-count="905">p</span> (fun (ty, _) -&gt; <span data-count="45018">t</span>y @@ no_region)
  in

  (* Inject call to "__wasm_call_ctors" *)
  let add_call_ctors =
    match NameMap.find_opt (Lib.Utf8.decod<span data-count="905">e</span> "__wasm_call_ctors") fun_exports2 with
    | <span data-count="0">N</span>one -&gt; fun em -&gt; <span data-count="0">e</span>m
    | <span data-count="905">S</span>ome fi -&gt; prepend_to_star<span data-count="905">t</span> (funs<span data-count="905">2</span> fi) (add_or_get_t<span data-count="905">y</span> (Wasm_exts.Types.FuncType ([], [])))
  in

  let new_table_size =
    Int32.add (Int32.ad<span data-count="905">d</span> lib_table_start dylink.table_size) (Int32.of_in<span data-count="905">t</span> (List.lengt<span data-count="905">h</span> got_func_imports))
  in

  (* Rust generates active data segments for the runtime system code that are not supported with orthogonal persistence.
     Therefore, for enhanced orthogonal persistence, make the data segments passive and load them on initialization to 
     their reserved static space.
     Note: If Rust would also use passive data segments in future, the segment load indices need to be renumbered. *)
  <span data-count="905">l</span>et make_rts_data_segments_passive : module_' -&gt; module_' = fun m -&gt;
    <span data-count="0">l</span>et segment_mode' (dmode : segment_mode') = 
      <span data-count="0">m</span>atch dmode with 
        | <span data-count="0">A</span>ctive _ -&gt; Passive
        | <span data-count="0">_</span> -&gt; raise (LinkError "Passive data segments are not yet supported in the RTS module")
    in
    let segment_mode = phrase (segment_mode') in
    <span data-count="0">l</span>et data_segment' (s : data_segment') = <span data-count="0">{</span> s with dmode = segment_mod<span data-count="0">e</span> s.dmode; } in
    let data_segment = phrase (data_segment') in
    <span data-count="0">l</span>et data_segments = List.map data_segment in
    <span data-count="0">{</span> m with datas = data_segment<span data-count="0">s</span> m.datas; }
  in

  let load_rts_data_segments numbering_offset data_segments : module_' -&gt; module_' = <span data-count="0">f</span>un m -&gt;
      <span data-count="0">l</span>et imported_functions = Int32.to_int (count_import<span data-count="0">s</span> is_fun_import m) in
      <span data-count="0">l</span>et start_index = Int32.to_int (match m.start with
      | <span data-count="0">S</span>ome index -&gt; index.it
      | <span data-count="0">N</span>one -&gt; raise (LinkError "The module has no start function to inject"))
      in
      <span data-count="0">l</span>et local_start_function = Int.sub start_index imported_functions in
      <span data-count="0">i</span>f local_start_function &lt; 0 then
        <span data-count="0">r</span>aise (LinkError "The module start refers to an imported function that cannot be injected");
      <span data-count="0">a</span>ssert <span data-count="0">(</span>local_start_function &lt; (List.lengt<span data-count="0">h</span> m.funcs));
  
      let load_passive_segment index data_segment =
        <span data-count="0">l</span>et segment_index = Int32.of_int (Int.ad<span data-count="0">d</span> index numbering_offset) in
        <span data-count="0">l</span>et compile_const_i32 value = <span data-count="0">C</span>onst (Wasm_exts.Values.I32 valu<span data-count="0">e</span> @@ no_region) @@ no_region in
        let data_target = match data_segment.it.dmode.it with
          | <span data-count="0">A</span>ctive { offset; _ } -&gt; offset.it
          | <span data-count="0">_</span> -&gt; raise (LinkError "Passive data segments are not yet supported in the RTS module")
        in
        let data_length = Int32.of_int (String.lengt<span data-count="0">h</span> data_segment.it.dinit) in
        <span data-count="0">l</span>et memory_init = MemoryInit (segment_inde<span data-count="0">x</span> @@ no_region) @@ no_region in
        <span data-count="0">d</span>ata_target @
        [ 
          compile_const_i3<span data-count="0">2</span> 0l; (* data offset *)
          compile_const_i3<span data-count="0">2</span> data_length; 
          memory_init 
        ]
      in
      let load_passive_segments = List.concat (List.map<span data-count="0">i</span> load_passive_segment data_segments) in
  
      <span data-count="0">l</span>et inject_in_func' code f = <span data-count="0">{</span> f with body = code @ f.body } in
      let inject_in_func code = <span data-count="0">p</span>hrase (inject_in_func<span data-count="0">'</span> code) in
      let patch_functions functions = 
        <span data-count="0">L</span>ist.mapi (fun index func -&gt; 
          <span data-count="0">i</span>f index = local_start_function then 
            <span data-count="0">i</span>nject_in_func load_passive_segments func
          else <span data-count="0">f</span>unc
        ) functions
      in
      { m with funcs = patch_function<span data-count="0">s</span> m.funcs; }
    in

  let merged = join_modules
    ( em1_tys
    |&gt; map_module (fun m -&gt; <span data-count="905">{</span> m with types = type_indices_sorted })
    |&gt; <span data-count="905">m</span>ap_module (remove_import<span data-count="905">s</span> is_fun_import fun_resolved12)
    |&gt; <span data-count="905">m</span>ap_name_section (remove_fun_imports_name_sectio<span data-count="905">n</span> fun_resolved12)
    |&gt; <span data-count="905">m</span>ap_module (remove_import<span data-count="905">s</span> is_global_import global_resolved12)
    |&gt; <span data-count="905">r</span>ename_funcs_extended funs1
    |&gt; <span data-count="905">r</span>ename_globals_extended globals1
    |&gt; <span data-count="905">m</span>ap_module (set_globa<span data-count="905">l</span> heap_global new_heap_start)
    |&gt; <span data-count="905">m</span>ap_module (set_memory_siz<span data-count="905">e</span> (I64_convert.extend_i32_<span data-count="905">u</span> new_heap_start))
    |&gt; <span data-count="905">m</span>ap_modul<span data-count="905">e</span> (set_table_siz<span data-count="905">e</span> new_table_size)
    )
    ( dm2
    |&gt; (if uses_memory64 then <span data-count="0">m</span>ake_rts_data_segments_passive else <span data-count="905">(</span>fun m -&gt; <span data-count="905">m</span>))
    |&gt; <span data-count="905">r</span>emove_imports is_fun_import fun_resolved21
    |&gt; <span data-count="905">r</span>emove_imports is_global_import global_resolved21
    |&gt; <span data-count="905">r</span>emove_imports is_memory_import [0l, 0l]
    |&gt; <span data-count="905">r</span>emove_imports is_table_import [0l, 0l]
    |&gt; <span data-count="905">r</span>ename_funcs funs2
    |&gt; <span data-count="905">r</span>ename_globals globals2
    |&gt; <span data-count="905">r</span>emove_expor<span data-count="905">t</span> is_fun_export "__wasm_call_ctors"
    )
    ( em2.name
    |&gt; remove_fun_imports_name_section fun_resolved21
    |&gt; <span data-count="905">r</span>ename_funcs_name_sectio<span data-count="905">n</span> funs2
    )
    type_indices
  |&gt; <span data-count="905">a</span>dd_call_ctors
  |&gt; <span data-count="905">r</span>emove_non_ic_exports (* only sane if no additional files get linked in *)
  |&gt; <span data-count="905">(</span>if uses_memory64 then <span data-count="0">m</span>ap_modul<span data-count="0">e</span> (load_rts_data_segment<span data-count="0">s</span> dm2_data_segment_offset dm2.datas) else <span data-count="905">(</span>fun m -&gt; <span data-count="905">m</span>))
  in

  (* Rename global and function indices in GOT.func stuff *)
  <span data-count="905">l</span>et got_func_imports =
    List.map (fun (global_idx, func_idx) -&gt; <span data-count="0">(</span>globals<span data-count="0">2</span> global_idx, funs<span data-count="0">2</span> func_idx)) got_func_imports
  in

  (* Replace GOT.func imports with globals to function table indices *)
  <span data-count="905">l</span>et final =
    replace_got_func_imports (Int32.ad<span data-count="905">d</span> lib_table_start dylink.table_size) got_func_imports merged.module_
  in

  <span data-count="905">{</span> merged with module_ = final }
</code></pre>
      </div>
    </div>
    <script src="../coverage.js"></script>
  </body>
</html>
